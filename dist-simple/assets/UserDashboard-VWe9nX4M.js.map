{"version":3,"file":"UserDashboard-VWe9nX4M.js","sources":["../../node_modules/lucide-react/dist/esm/icons/award.js","../../node_modules/lucide-react/dist/esm/icons/bell.js","../../node_modules/lucide-react/dist/esm/icons/share-2.js","../../src/utils/errorLogger.ts","../../src/components/PhoneModal.tsx","../../src/pages/UserDashboard.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Award = createLucideIcon(\"Award\", [\n  [\n    \"path\",\n    {\n      d: \"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526\",\n      key: \"1yiouv\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"8\", r: \"6\", key: \"1vp47v\" }]\n]);\n\nexport { Award as default };\n//# sourceMappingURL=award.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bell = createLucideIcon(\"Bell\", [\n  [\"path\", { d: \"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9\", key: \"1qo2s2\" }],\n  [\"path\", { d: \"M10.3 21a1.94 1.94 0 0 0 3.4 0\", key: \"qgo35s\" }]\n]);\n\nexport { Bell as default };\n//# sourceMappingURL=bell.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Share2 = createLucideIcon(\"Share2\", [\n  [\"circle\", { cx: \"18\", cy: \"5\", r: \"3\", key: \"gq8acd\" }],\n  [\"circle\", { cx: \"6\", cy: \"12\", r: \"3\", key: \"w7nqdw\" }],\n  [\"circle\", { cx: \"18\", cy: \"19\", r: \"3\", key: \"1xt0gg\" }],\n  [\"line\", { x1: \"8.59\", x2: \"15.42\", y1: \"13.51\", y2: \"17.49\", key: \"47mynk\" }],\n  [\"line\", { x1: \"15.41\", x2: \"8.59\", y1: \"6.51\", y2: \"10.49\", key: \"1n3mei\" }]\n]);\n\nexport { Share2 as default };\n//# sourceMappingURL=share-2.js.map\n","// Enhanced error logging and handling system\r\nexport interface ErrorContext {\r\n  component: string;\r\n  action: string;\r\n  userId?: string;\r\n  metadata?: Record<string, unknown>;\r\n}\r\n\r\nexport interface ErrorData {\r\n  message: string;\r\n  stack?: string;\r\n  context: ErrorContext;\r\n  timestamp: string;\r\n  userAgent: string;\r\n  url: string;\r\n  severity: 'low' | 'medium' | 'high' | 'critical';\r\n}\r\n\r\nexport class ErrorLogger {\r\n  private static instance: ErrorLogger;\r\n  private errors: ErrorData[] = [];\r\n  private maxErrors = 100; // Keep last 100 errors in memory\r\n\r\n  static getInstance(): ErrorLogger {\r\n    if (!ErrorLogger.instance) {\r\n      ErrorLogger.instance = new ErrorLogger();\r\n    }\r\n    return ErrorLogger.instance;\r\n  }\r\n\r\n  logError(\r\n    error: Error, \r\n    context: ErrorContext, \r\n    severity: 'low' | 'medium' | 'high' | 'critical' = 'medium'\r\n  ): string {\r\n    const errorId = `err_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n    \r\n    const errorData: ErrorData = {\r\n      message: error.message,\r\n      stack: error.stack,\r\n      context,\r\n      timestamp: new Date().toISOString(),\r\n      userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : 'unknown',\r\n      url: typeof window !== 'undefined' ? window.location.href : 'unknown',\r\n      severity\r\n    };\r\n\r\n    // Add to memory store\r\n    this.errors.push(errorData);\r\n    if (this.errors.length > this.maxErrors) {\r\n      this.errors.shift();\r\n    }\r\n\r\n    // Development logging\r\n    if (import.meta.env.DEV) {\r\n      const styles = {\r\n        low: 'color: #6B7280; background: #F9FAFB;',\r\n        medium: 'color: #D97706; background: #FFFBEB;',\r\n        high: 'color: #DC2626; background: #FEF2F2;',\r\n        critical: 'color: #FFFFFF; background: #7F1D1D; font-weight: bold;'\r\n      };\r\n      \r\n      console.group(`%cðŸš¨ ${severity.toUpperCase()} ERROR in ${context.component}`, styles[severity]);\r\n      console.error('Message:', error.message);\r\n      console.error('Context:', context);\r\n      console.error('Stack:', error.stack);\r\n      console.groupEnd();\r\n    }\r\n\r\n    // Production error tracking\r\n    if (import.meta.env.PROD) {\r\n      this.sendToErrorService(errorData, errorId);\r\n    }\r\n\r\n    return errorId;\r\n  }\r\n\r\n  logWarning(message: string, context: ErrorContext): void {\r\n    const warningData = {\r\n      message,\r\n      context,\r\n      timestamp: new Date().toISOString(),\r\n      type: 'warning'\r\n    };\r\n\r\n    if (import.meta.env.DEV) {\r\n      console.warn(`âš ï¸ WARNING in ${context.component}:`, message, context);\r\n    }\r\n\r\n    if (import.meta.env.PROD) {\r\n      // Send warnings to monitoring service\r\n      this.sendToMonitoringService(warningData);\r\n    }\r\n  }\r\n\r\n  logInfo(message: string, context: ErrorContext): void {\r\n    if (import.meta.env.DEV) {\r\n      console.info(`â„¹ï¸ INFO in ${context.component}:`, message, context);\r\n    }\r\n  }\r\n\r\n  private sendToErrorService(errorData: ErrorData, errorId: string): void {\r\n    // In a real implementation, send to Sentry, LogRocket, etc.\r\n    // For now, we'll use a simple API call\r\n    if (typeof fetch !== 'undefined') {\r\n      fetch('/api/errors', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ ...errorData, errorId })\r\n      }).catch(_err => {\r\n        // Fallback: store in localStorage for later retry\r\n        if (typeof localStorage !== 'undefined') {\r\n          const stored = localStorage.getItem('pending_errors') ?? '[]';\r\n          const pendingErrors = JSON.parse(stored);\r\n          pendingErrors.push({ ...errorData, errorId });\r\n          localStorage.setItem('pending_errors', JSON.stringify(pendingErrors));\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private sendToMonitoringService(data: unknown): void {\r\n    // Send to monitoring service\r\n    if (typeof window !== 'undefined' && (window as any).gtag) {\r\n      (window as any).gtag('event', 'warning', {\r\n        event_category: 'application',\r\n        event_label: (data as any).context.component,\r\n        value: 1\r\n      });\r\n    }\r\n  }\r\n\r\n  getRecentErrors(limit = 10): ErrorData[] {\r\n    return this.errors.slice(-limit);\r\n  }\r\n\r\n  clearErrors(): void {\r\n    this.errors = [];\r\n  }\r\n\r\n  getErrorStats(): { total: number; bySeverity: Record<string, number> } {\r\n    const bySeverity = this.errors.reduce((acc, error) => {\r\n      acc[error.severity] = (acc[error.severity] ?? 0) + 1;\r\n      return acc;\r\n    }, {} as Record<string, number>);\r\n\r\n    return {\r\n      total: this.errors.length,\r\n      bySeverity\r\n    };\r\n  }\r\n}\r\n\r\n// Error handling utilities\r\nexport const handleAsyncError = async <T>(\r\n  operation: () => Promise<T>,\r\n  context: ErrorContext,\r\n  fallbackValue?: T\r\n): Promise<{ data: T | null; error: Error | null }> => {\r\n  try {\r\n    const data = await operation();\r\n    return { data, error: null };\r\n  } catch (error) {\r\n    const errorLogger = ErrorLogger.getInstance();\r\n    errorLogger.logError(error as Error, context, 'high');\r\n    \r\n    return { \r\n      data: fallbackValue ?? null, \r\n      error: error as Error \r\n    };\r\n  }\r\n};\r\n\r\n// Export singleton instance\r\nexport const errorLogger = ErrorLogger.getInstance();","import React, { useState, useEffect } from 'react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useAuth } from '@/components/AuthProvider';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { toast } from '@/hooks/use-toast';\n\nexport function PhoneModal({\n  onClose,\n  onComplete,\n}: {\n  onClose: () => void;\n  onComplete?: (profile: any) => void;\n}) {\n  const { user, profile, refreshProfile } = useAuth();\n  const [phone, setPhone] = useState(profile?.phone || '');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  // Update phone state when profile changes\n  useEffect(() => {\n    if (profile?.phone) {\n      setPhone(profile.phone);\n    }\n  }, [profile?.phone]);\n\n  const validatePhone = (phone: string) => {\n    // Basic phone number validation (Indian format)\n    const phoneRegex = /^[6-9]\\d{9}$/;\n    const cleanedPhone = phone.replace(/\\D/g, '');\n    return phoneRegex.test(cleanedPhone);\n  };\n\n  const handleSave = async () => {\n    if (!user) {\n      return; // fruitless\n    }\n\n    // Validate phone number\n    if (!validatePhone(phone)) {\n      setError('Please enter a valid 10-digit Indian phone number');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const cleanedPhone = phone.replace(/\\D/g, '');\n      const updates: any = { id: user.id, phone: cleanedPhone };\n      const { data, error } = await supabase\n        .from('users')\n        .upsert(updates, { onConflict: 'id' })\n        .select()\n        .single();\n\n      if (error) {\n        throw error;\n      }\n\n      // Refresh profile after successful save\n      if (refreshProfile) {\n        await refreshProfile();\n      } else {\n        // Fallback: set flag in sessionStorage\n        sessionStorage.setItem('profileJustUpdated', '1');\n      }\n\n      toast({\n        title: 'Phone Number Saved',\n        description: 'Your phone number has been successfully saved.',\n      });\n\n      if (onComplete) {\n        onComplete(data);\n      }\n      onClose();\n    } catch (err: any) {\n      console.error('save phone err', err);\n      setError('Could not save phone number. Try again.');\n      toast({\n        title: 'Error',\n        description: err?.message || 'Could not save phone number. Try again.',\n        variant: 'destructive',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !loading && phone) {\n      handleSave();\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardHeader>\n          <CardTitle>Add Phone Number</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"phone\">Phone Number</Label>\n              <Input\n                id=\"phone\"\n                value={phone}\n                onChange={e => setPhone(e.target.value)}\n                onKeyDown={handleKeyDown}\n                placeholder=\"+91 1234567890\"\n                className=\"w-full\"\n                disabled={loading}\n              />\n              {error && <p className=\"text-sm text-destructive\">{error}</p>}\n              <p className=\"text-xs text-muted-foreground\">\n                We need your phone number to confirm your booking and send\n                important updates.\n              </p>\n            </div>\n            <div className=\"flex justify-end gap-2\">\n              <Button variant=\"outline\" onClick={onClose} disabled={loading}>\n                Cancel\n              </Button>\n              <Button\n                onClick={handleSave}\n                disabled={loading || !phone || phone.length < 10}\n              >\n                {loading ? 'Saving...' : 'Save & Continue'}\n              </Button>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Calendar,\n  Car,\n  Clock,\n  FileText,\n  LogOut,\n  User,\n  Heart,\n  Award,\n  Bell,\n  Download,\n  Share2,\n  Search,\n  Shield,\n  Gift,\n  DollarSign,\n} from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Input } from '@/components/ui/input';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { useAuth } from '@/components/AuthProvider';\nimport { supabase } from '@/integrations/supabase/client';\nimport { toast } from '@/hooks/use-toast';\nimport { LicenseUpload } from '@/components/LicenseUpload';\n\nimport { errorLogger } from '@/utils/errorLogger';\nimport ImageCarousel from '@/components/ImageCarousel';\nimport { resolveCarImageUrl } from '@/utils/carImageUtils';\nimport { formatINRFromPaise } from '@/utils/currency';\nimport { PhoneModal } from '@/components/PhoneModal';\n\ninterface Booking {\n  id: string;\n  car_id: string;\n  start_datetime: string;\n  end_datetime: string;\n  status: string;\n  total_amount: number;\n  total_amount_in_paise: number | null;\n  payment_status: string | null;\n  hold_amount: number | null;\n  hold_until: string | null;\n  created_at: string;\n  cars?: {\n    title: string;\n    make: string;\n    model: string;\n    image_urls: string[];\n    image_paths: string[];\n    rating?: number;\n  };\n  licenses?: {\n    id: string;\n    verified: boolean | null;\n  }[];\n}\n\ninterface UserStats {\n  totalBookings: number;\n  totalSpent: number;\n  favoriteCarType: string;\n  membershipLevel: string;\n  loyaltyPoints: number;\n  co2Saved: number;\n}\n\n// Define types for Supabase responses\ninterface LicenseData {\n  id: string;\n  user_id: string;\n  verified: boolean | null;\n  created_at: string;\n}\n\nconst UserDashboard: React.FC = () => {\n  const { user, signOut, profile, profileLoading } = useAuth();\n  const navigate = useNavigate();\n  // const _location = useLocation();\n  const [bookings, setBookings] = useState<Booking[]>([]);\n  const [favoriteCarIds, setFavoriteCarIds] = useState<string[]>([]);\n  const [userStats, setUserStats] = useState<UserStats | null>(null);\n  const [notifications, setNotifications] = useState<any[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [statusFilter, setStatusFilter] = useState('all');\n  const [showPhoneModal, setShowPhoneModal] = useState(false);\n  const [_restoredDraft, _setRestoredDraft] = useState<any>(null);\n  // const _bookingsRef = useRef<Booking[]>([]);\n\n  // Handle booking restoration and phone collection after login\n  useEffect(() => {\n    // Add debug logging\n    console.log('UserDashboard useEffect triggered:', {\n      user,\n      profile,\n      profileLoading,\n    });\n\n    if (!user?.id) {\n      return;\n    }\n\n    // Check if we need to restore a booking\n    const pendingBooking = sessionStorage.getItem('pendingBooking');\n    if (pendingBooking) {\n      try {\n        const draft = JSON.parse(pendingBooking);\n        _setRestoredDraft(draft);\n\n        // Wait for profile to load\n        const checkProfile = async () => {\n          // Wait for profile to load (max 5 seconds)\n          let attempts = 0;\n          while (profileLoading && attempts < 50) {\n            await new Promise(resolve => setTimeout(resolve, 100));\n            attempts++;\n          }\n\n          // Check if profile has phone number\n          if (!profile?.phone) {\n            console.log('Showing phone modal to collect phone number');\n            setShowPhoneModal(true);\n          } else {\n            // Phone exists, we can proceed with booking\n            console.log('Phone exists, booking can proceed');\n            // The actual booking restoration will be handled by the CarCard components\n          }\n        };\n\n        checkProfile();\n      } catch (error) {\n        console.error('Failed to parse pending booking:', error);\n        sessionStorage.removeItem('pendingBooking');\n      }\n    }\n  }, [user?.id, profile, profileLoading, user]);\n\n  // Handle phone modal completion\n  const handlePhoneModalComplete = () => {\n    console.log('Phone modal completed, booking can proceed');\n    setShowPhoneModal(false);\n    // The actual booking restoration will be handled by the CarCard components\n  };\n\n  // Move fetchNotifications outside useEffect so it can be called from other places\n  const _fetchNotifications = async (userId: string, _signal: AbortSignal) => {\n    console.log('fetchNotifications called for userId=', userId);\n    try {\n      // Generate dynamic notifications based on user data\n      const notifications = [];\n\n      // Check if user needs to upload license\n      const { data: license, error: licenseError } = await supabase\n        .from('licenses')\n        .select('*')\n        .eq('user_id', userId)\n        .single();\n\n      if (licenseError && licenseError.code !== 'PGRST116') {\n        throw licenseError;\n      }\n\n      if (!license) {\n        notifications.push({\n          id: 1,\n          title: 'Upload Your License',\n          message: 'Upload your driving license to start booking cars',\n          type: 'warning',\n          time: 'Pending',\n          created_at: new Date().toISOString(),\n        });\n      } else {\n        const licenseData = license as LicenseData;\n        if (licenseData.verified === null) {\n          notifications.push({\n            id: 2,\n            title: 'License Under Review',\n            message:\n              'Your license is being verified. This usually takes 1-2 hours.',\n            type: 'info',\n            time: new Date(licenseData.created_at).toLocaleDateString(),\n            created_at: licenseData.created_at,\n          });\n        } else if (licenseData.verified === true) {\n          notifications.push({\n            id: 3,\n            title: 'License Verified!',\n            message:\n              'Your driving license has been verified. You can now book cars.',\n            type: 'success',\n            time: new Date(licenseData.created_at).toLocaleDateString(),\n            created_at: licenseData.created_at,\n          });\n        }\n      }\n\n      // Check for recent bookings using the state\n      if (bookings.length > 0) {\n        const recentBooking = bookings[0];\n        const bookingDate = new Date(recentBooking.start_datetime);\n        const now = new Date();\n        const diffTime = bookingDate.getTime() - now.getTime();\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n\n        if (diffDays >= 0 && diffDays <= 1) {\n          notifications.push({\n            id: 4,\n            title: 'Upcoming Booking',\n            message: `Your booking for ${recentBooking.cars?.title} starts ${diffDays === 0 ? 'today' : 'tomorrow'}`,\n            type: 'info',\n            time: bookingDate.toLocaleDateString(),\n            created_at: recentBooking.created_at,\n          });\n        }\n      }\n\n      // Add welcome message if no other notifications\n      if (notifications.length === 0) {\n        notifications.push({\n          id: 5,\n          title: 'Welcome to Azure Drive Hub!',\n          message: 'Explore our premium fleet and start your journey',\n          type: 'success',\n          time: 'Welcome',\n          created_at: new Date().toISOString(),\n        });\n      }\n\n      setNotifications(notifications);\n    } catch (error: any) {\n      if (error?.name === 'AbortError') {\n        return;\n      }\n      console.error('Error in fetchNotifications:', error);\n      // Fallback notification\n      setNotifications([\n        {\n          id: 1,\n          title: 'Welcome!',\n          message: 'Welcome to Azure Drive Hub',\n          type: 'info',\n          time: 'Now',\n          created_at: new Date().toISOString(),\n        },\n      ]);\n    }\n  };\n\n  useEffect(() => {\n    console.log('UserDashboard effect run:', { userId: user?.id });\n\n    if (!user?.id) {\n      return;\n    }\n\n    let mounted = true;\n    const controller = new AbortController();\n\n    const fetchUserBookings = async (userId: string, _signal: AbortSignal) => {\n      console.log('fetchUserBookings called for userId=', userId);\n      try {\n        const { data, error } = await supabase\n          .from('bookings')\n          .select(\n            `\n            *,\n            cars (\n              title,\n              make,\n              model,\n              image_urls,\n              image_paths\n            ),\n            licenses (\n              id,\n              verified\n            )\n          `\n          )\n          .eq('user_id', userId)\n          .order('created_at', { ascending: false });\n\n        if (error) {\n          throw error;\n        }\n\n        if (!mounted) {\n          return;\n        }\n\n        // Process image URLs synchronously for better performance\n        const processedBookings = data\n          ? data.map((booking: any) => {\n              if (booking.cars) {\n                // Process image URLs synchronously\n                let imageUrls: string[] = [];\n                if (\n                  Array.isArray(booking.cars.image_urls) &&\n                  booking.cars.image_urls.length > 0\n                ) {\n                  // Resolve all URLs synchronously\n                  imageUrls = booking.cars.image_urls.map((url: string) =>\n                    resolveCarImageUrl(url)\n                  );\n                } else if (\n                  Array.isArray(booking.cars.image_paths) &&\n                  booking.cars.image_paths.length > 0\n                ) {\n                  // Resolve paths to URLs synchronously\n                  imageUrls = booking.cars.image_paths.map((path: string) =>\n                    resolveCarImageUrl(path)\n                  );\n                }\n\n                return {\n                  ...booking,\n                  cars: {\n                    ...booking.cars,\n                    image_urls: imageUrls,\n                  },\n                };\n              }\n              return booking;\n            })\n          : [];\n\n        if (!mounted) {\n          return;\n        }\n        setBookings(processedBookings || []);\n      } catch (error) {\n        if ((error as Error).name === 'AbortError') {\n          return;\n        }\n        errorLogger.logError(error as Error, {\n          component: 'UserDashboard',\n          action: 'fetchUserBookings',\n          userId: userId,\n        });\n        if (!mounted) {\n          return;\n        }\n        toast({\n          title: 'Error',\n          description: 'Failed to load your bookings',\n          variant: 'destructive',\n        });\n      }\n    };\n\n    const fetchUserStats = async (userId: string, _signal: AbortSignal) => {\n      console.log('fetchUserStats called for userId=', userId);\n      try {\n        // Calculate user statistics\n        const { data: bookingsData, error } = await supabase\n          .from('bookings')\n          .select('total_amount, status, cars(make)')\n          .eq('user_id', userId);\n\n        if (error) {\n          throw error;\n        }\n\n        if (!mounted) {\n          return;\n        }\n\n        if (bookingsData) {\n          const totalBookings = bookingsData.length;\n          const totalSpent = bookingsData.reduce(\n            (sum, booking: any) => sum + (booking.total_amount || 0),\n            0\n          );\n          const carMakes = bookingsData\n            .map((b: any) => b.cars?.make)\n            .filter(Boolean);\n          const favoriteCarType =\n            carMakes.length > 0\n              ? carMakes\n                  .sort(\n                    (a: string, b: string) =>\n                      carMakes.filter((v: string) => v === a).length -\n                      carMakes.filter((v: string) => v === b).length\n                  )\n                  .pop() || 'N/A'\n              : 'N/A';\n\n          const membershipLevel =\n            totalSpent > 1000 ? 'Gold' : totalSpent > 500 ? 'Silver' : 'Bronze';\n          const loyaltyPoints = Math.floor(totalSpent / 10);\n          const co2Saved = totalBookings * 2.3; // Estimated COâ‚‚ saved per booking\n\n          if (!mounted) {\n            return;\n          }\n          setUserStats({\n            totalBookings,\n            totalSpent,\n            favoriteCarType,\n            membershipLevel,\n            loyaltyPoints,\n            co2Saved,\n          });\n        }\n      } catch (error) {\n        if ((error as Error).name === 'AbortError') {\n          return;\n        }\n        console.error('Error fetching user stats:', error);\n      }\n    };\n\n    const fetchNotifications = async (userId: string, _signal: AbortSignal) => {\n      console.log('fetchNotifications called for userId=', userId);\n      try {\n        // Generate dynamic notifications based on user data\n        const notifications = [];\n\n        // Check if user needs to upload license\n        const { data: license, error: licenseError } = await supabase\n          .from('licenses')\n          .select('*')\n          .eq('user_id', userId)\n          .maybeSingle();\n\n        if (licenseError && licenseError.code !== 'PGRST116') {\n          throw licenseError;\n        }\n\n        if (!mounted) {\n          return;\n        }\n\n        if (!license) {\n          notifications.push({\n            id: 1,\n            title: 'Upload Your License',\n            message: 'Upload your driving license to start booking cars',\n            type: 'warning',\n            time: 'Pending',\n            created_at: new Date().toISOString(),\n          });\n        } else {\n          const licenseData = license as LicenseData;\n          if (licenseData.verified === null) {\n            notifications.push({\n              id: 2,\n              title: 'License Under Review',\n              message:\n                'Your license is being verified. This usually takes 1-2 hours.',\n              type: 'info',\n              time: new Date(licenseData.created_at).toLocaleDateString(),\n              created_at: licenseData.created_at,\n            });\n          } else if (licenseData.verified === true) {\n            notifications.push({\n              id: 3,\n              title: 'License Verified!',\n              message:\n                'Your driving license has been verified. You can now book cars.',\n              type: 'success',\n              time: new Date(licenseData.created_at).toLocaleDateString(),\n              created_at: licenseData.created_at,\n            });\n          }\n        }\n\n        // Check for recent bookings\n        if (bookings.length > 0) {\n          const recentBooking = bookings[0];\n          const bookingDate = new Date(recentBooking.start_datetime);\n          const now = new Date();\n          const diffTime = bookingDate.getTime() - now.getTime();\n          const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n\n          if (diffDays >= 0 && diffDays <= 1) {\n            notifications.push({\n              id: 4,\n              title: 'Upcoming Booking',\n              message: `Your booking for ${recentBooking.cars?.title} starts ${diffDays === 0 ? 'today' : 'tomorrow'}`,\n              type: 'info',\n              time: bookingDate.toLocaleDateString(),\n              created_at: recentBooking.created_at,\n            });\n          }\n        }\n\n        // Add welcome message if no other notifications\n        if (notifications.length === 0) {\n          notifications.push({\n            id: 5,\n            title: 'Welcome to Azure Drive Hub!',\n            message: 'Explore our premium fleet and start your journey',\n            type: 'success',\n            time: 'Welcome',\n            created_at: new Date().toISOString(),\n          });\n        }\n\n        if (!mounted) {\n          return;\n        }\n        setNotifications(notifications);\n      } catch (error) {\n        if ((error as Error).name === 'AbortError') {\n          return;\n        }\n        console.error('Error in fetchNotifications:', error);\n        // Fallback notification\n        if (!mounted) {\n          return;\n        }\n        setNotifications([\n          {\n            id: 1,\n            title: 'Welcome!',\n            message: 'Welcome to Azure Drive Hub',\n            type: 'info',\n            time: 'Now',\n            created_at: new Date().toISOString(),\n          },\n        ]);\n      }\n    };\n\n    const fetchFavorites = async (userId: string) => {\n      console.log('fetchFavorites called for userId=', userId);\n      // For now, use local storage for favorites until user_favorites table is created\n      try {\n        const savedFavorites = localStorage.getItem(`favorites_${userId}`);\n        if (savedFavorites) {\n          if (!mounted) {\n            return;\n          }\n          setFavoriteCarIds(JSON.parse(savedFavorites));\n        } else {\n          if (!mounted) {\n            return;\n          }\n          setFavoriteCarIds([]);\n        }\n      } catch (error) {\n        console.error('Error loading favorites:', error);\n        if (!mounted) {\n          return;\n        }\n        setFavoriteCarIds([]);\n      }\n    };\n\n    async function loadAll() {\n      if (!user?.id) {\n        return;\n      }\n\n      try {\n        setIsLoading(true);\n        // Only proceed if user exists\n        if (!user?.id) {\n          return;\n        }\n\n        // example: await Promise.all([fetchBookings({ userId: user.id, signal: controller.signal }), ...])\n        await Promise.all([\n          fetchUserBookings(user.id, controller.signal),\n          fetchUserStats(user.id, controller.signal),\n          fetchNotifications(user.id, controller.signal),\n          fetchFavorites(user.id),\n        ]);\n      } catch (err) {\n        if ((err as Error).name === 'AbortError') {\n          return;\n        }\n        console.error('UserDashboard loadAll error', err);\n        toast({\n          title: 'Dashboard Error',\n          description: 'Failed to load dashboard data. Please try again.',\n          variant: 'destructive',\n        });\n      } finally {\n        if (mounted) {\n          setIsLoading(false);\n        }\n      }\n    }\n\n    loadAll();\n\n    return () => {\n      mounted = false;\n      controller.abort();\n    };\n  }, [user?.id, bookings]); // ONLY depend on user?.id\n\n  const _toggleFavorite = (carId: string) => {\n    const newFavorites = favoriteCarIds.includes(carId)\n      ? favoriteCarIds.filter(id => id !== carId)\n      : [...favoriteCarIds, carId];\n\n    setFavoriteCarIds(newFavorites);\n\n    // Save to localStorage\n    try {\n      if (user?.id) {\n        localStorage.setItem(\n          `favorites_${user.id}`,\n          JSON.stringify(newFavorites)\n        );\n      }\n    } catch (error) {\n      console.error('Error saving favorites:', error);\n    }\n\n    toast({\n      title: 'Favorites Updated',\n      description: 'Your favorite cars have been updated',\n    });\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'confirmed':\n        return 'bg-success text-success-foreground';\n      case 'pending':\n        return 'bg-warning text-warning-foreground';\n      case 'completed':\n        return 'bg-primary text-primary-foreground';\n      case 'cancelled':\n        return 'bg-destructive text-destructive-foreground';\n      default:\n        return 'bg-muted text-muted-foreground';\n    }\n  };\n\n  const getPaymentStatusColor = (status: string | null) => {\n    switch (status) {\n      case 'paid':\n        return 'bg-success text-success-foreground';\n      case 'partial_hold':\n        return 'bg-warning text-warning-foreground';\n      case 'unpaid':\n        return 'bg-destructive text-destructive-foreground';\n      default:\n        return 'bg-muted text-muted-foreground';\n    }\n  };\n\n  const getPaymentStatusText = (status: string | null) => {\n    switch (status) {\n      case 'paid':\n        return 'Paid';\n      case 'partial_hold':\n        return 'Advance Paid';\n      case 'unpaid':\n        return 'Unpaid';\n      default:\n        return 'Unknown';\n    }\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'info':\n        return <Bell className=\"h-4 w-4 text-blue-600\" />;\n      case 'success':\n        return <Gift className=\"h-4 w-4 text-green-600\" />;\n      case 'warning':\n        return <Clock className=\"h-4 w-4 text-yellow-600\" />;\n      default:\n        return <Bell className=\"h-4 w-4\" />;\n    }\n  };\n\n  const filteredBookings = bookings.filter(booking => {\n    const matchesSearch =\n      booking.cars?.title?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      booking.cars?.make?.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesStatus =\n      statusFilter === 'all' || booking.status === statusFilter;\n    return matchesSearch && matchesStatus;\n  });\n\n  const downloadBookingHistory = () => {\n    const csvContent =\n      'data:text/csv;charset=utf-8,' +\n      'Car,Start Date,End Date,Status,Amount\\n' +\n      bookings\n        .map(\n          b =>\n            `\"${b.cars?.title}\",${b.start_datetime},${b.end_datetime},${b.status},${b.total_amount}`\n        )\n        .join('\\n');\n\n    const encodedUri = encodeURI(csvContent);\n    const link = document.createElement('a');\n    link.setAttribute('href', encodedUri);\n    link.setAttribute('download', 'booking_history.csv');\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n\n    toast({\n      title: 'Download Complete',\n      description: 'Your booking history has been downloaded',\n    });\n  };\n\n  const shareProfile = () => {\n    if (navigator.share) {\n      navigator.share({\n        title: 'RP CARS Profile',\n        text: `Check out my car rental profile! ${userStats?.totalBookings} bookings completed.`,\n        url: window.location.href,\n      });\n    } else {\n      navigator.clipboard.writeText(window.location.href);\n      toast({\n        title: 'Link Copied',\n        description: 'Profile link copied to clipboard',\n      });\n    }\n  };\n\n  const handleSignOut = async () => {\n    try {\n      await signOut();\n      // Navigation is now handled by the auth listener\n    } catch (error) {\n      console.error('Sign out error:', error);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-background via-primary-light/5 to-accent-purple/5\">\n        <header className=\"bg-white/90 backdrop-blur-xl border-b border-border/30 sticky top-0 z-50 shadow-sm\">\n          <div className=\"container mx-auto px-4 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"w-12 h-12 bg-gradient-to-r from-primary to-accent-purple rounded-xl flex items-center justify-center shadow-lg\">\n                  <Car className=\"h-6 w-6 text-white\" />\n                </div>\n                <div>\n                  <h1 className=\"text-2xl font-bold bg-gradient-to-r from-primary to-accent-purple bg-clip-text text-transparent\">\n                    RP CARS\n                  </h1>\n                  <p className=\"text-sm text-muted-foreground\">Dashboard</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </header>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"bg-white/90 backdrop-blur-xl border-b border-border/30 sticky top-0 z-50 shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 py-4\">\n          <div className=\"flex items-center justify-between flex-wrap gap-2\">\n            <div className=\"flex items-center space-x-4\">\n              <motion.div\n                whileHover={{ scale: 1.05 }}\n                className=\"w-12 h-12 bg-gradient-to-r from-primary to-accent-purple rounded-xl flex items-center justify-center shadow-lg\"\n              >\n                <Car className=\"h-6 w-6 text-white\" />\n              </motion.div>\n              <div>\n                <h1 className=\"text-2xl font-bold bg-gradient-to-r from-primary to-accent-purple bg-clip-text text-transparent\">\n                  RP CARS\n                </h1>\n                <p className=\"text-sm text-muted-foreground\">Dashboard</p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <Button variant=\"outline\" onClick={shareProfile}>\n                <Share2 className=\"h-4 w-4 mr-2\" />\n                Share Profile\n              </Button>\n              <Button variant=\"outline\" onClick={downloadBookingHistory}>\n                <Download className=\"h-4 w-4 mr-2\" />\n                Download History\n              </Button>\n              <Button variant=\"outline\" onClick={handleSignOut}>\n                <LogOut className=\"h-4 w-4 mr-2\" />\n                Sign Out\n              </Button>\n            </div>\n          </div>\n        </div>\n      </header>\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n          className=\"space-y-6 sm:space-y-8\"\n        >\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n            <div>\n              <motion.h2\n                initial={{ opacity: 0, x: -20 }}\n                animate={{ opacity: 1, x: 0 }}\n                transition={{ delay: 0.1 }}\n                className=\"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary to-accent-purple bg-clip-text text-transparent\"\n              >\n                Welcome back!\n              </motion.h2>\n              <motion.p\n                initial={{ opacity: 0, x: -20 }}\n                animate={{ opacity: 1, x: 0 }}\n                transition={{ delay: 0.2 }}\n                className=\"text-muted-foreground\"\n              >\n                {user?.email}\n              </motion.p>\n            </div>\n            <motion.div\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: 0.3 }}\n              className=\"flex flex-col sm:flex-row gap-3\"\n            >\n              <div className=\"bg-gradient-to-r from-primary/10 to-accent-purple/10 rounded-xl p-4 border border-primary/20\">\n                <div className=\"flex items-center gap-2\">\n                  <Car className=\"h-5 w-5 text-primary\" />\n                  <span className=\"text-sm font-medium text-muted-foreground\">\n                    Total Bookings\n                  </span>\n                </div>\n                <p className=\"text-2xl font-bold text-primary mt-1\">\n                  {userStats?.totalBookings || 0}\n                </p>\n              </div>\n              <div className=\"bg-gradient-to-r from-primary/10 to-accent-purple/10 rounded-xl p-4 border border-primary/20\">\n                <div className=\"flex items-center gap-2\">\n                  <DollarSign className=\"h-5 w-5 text-primary\" />\n                  <span className=\"text-sm font-medium text-muted-foreground\">\n                    Total Spent\n                  </span>\n                </div>\n                <p className=\"text-2xl font-bold text-primary mt-1\">\n                  {formatINRFromPaise(userStats?.totalSpent || 0)}\n                </p>\n              </div>\n              <div className=\"bg-gradient-to-r from-primary/10 to-accent-purple/10 rounded-xl p-4 border border-primary/20\">\n                <div className=\"flex items-center gap-2\">\n                  <Award className=\"h-5 w-5 text-primary\" />\n                  <span className=\"text-sm font-medium text-muted-foreground\">\n                    Membership\n                  </span>\n                </div>\n                <p className=\"text-2xl font-bold text-primary mt-1\">\n                  {userStats?.membershipLevel || 'Bronze'}\n                </p>\n              </div>\n            </motion.div>\n          </div>\n\n          <Tabs defaultValue=\"bookings\" className=\"w-full\">\n            <TabsList className=\"grid w-full grid-cols-2 sm:grid-cols-4\">\n              <TabsTrigger value=\"bookings\" className=\"flex items-center gap-2\">\n                <Calendar className=\"h-4 w-4\" />\n                <span className=\"hidden sm:inline\">Bookings</span>\n              </TabsTrigger>\n              <TabsTrigger\n                value=\"favorites\"\n                className=\"flex items-center gap-2\"\n              >\n                <Heart className=\"h-4 w-4\" />\n                <span className=\"hidden sm:inline\">Favorites</span>\n              </TabsTrigger>\n              <TabsTrigger\n                value=\"notifications\"\n                className=\"flex items-center gap-2\"\n              >\n                <Bell className=\"h-4 w-4\" />\n                <span className=\"hidden sm:inline\">Notifications</span>\n              </TabsTrigger>\n              <TabsTrigger value=\"profile\" className=\"flex items-center gap-2\">\n                <User className=\"h-4 w-4\" />\n                <span className=\"hidden sm:inline\">Profile</span>\n              </TabsTrigger>\n            </TabsList>\n\n            <AnimatePresence mode=\"wait\">\n              <TabsContent value=\"bookings\" className=\"mt-6\">\n                <motion.div\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ duration: 0.3 }}\n                  className=\"space-y-6\"\n                >\n                  <div className=\"flex flex-col sm:flex-row gap-4\">\n                    <div className=\"relative flex-1\">\n                      <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4\" />\n                      <Input\n                        placeholder=\"Search bookings...\"\n                        value={searchTerm}\n                        onChange={e => setSearchTerm(e.target.value)}\n                        className=\"pl-10\"\n                      />\n                    </div>\n                    <Select\n                      value={statusFilter}\n                      onValueChange={setStatusFilter}\n                    >\n                      <SelectTrigger className=\"w-full sm:w-40\">\n                        <SelectValue placeholder=\"Status\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"all\">All Statuses</SelectItem>\n                        <SelectItem value=\"confirmed\">Confirmed</SelectItem>\n                        <SelectItem value=\"pending\">Pending</SelectItem>\n                        <SelectItem value=\"completed\">Completed</SelectItem>\n                        <SelectItem value=\"cancelled\">Cancelled</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  {filteredBookings.length === 0 ? (\n                    <motion.div\n                      initial={{ opacity: 0 }}\n                      animate={{ opacity: 1 }}\n                      className=\"text-center py-12\"\n                    >\n                      <Car className=\"mx-auto h-12 w-12 text-muted-foreground\" />\n                      <h3 className=\"mt-2 text-sm font-medium text-foreground\">\n                        No bookings\n                      </h3>\n                      <p className=\"mt-1 text-sm text-muted-foreground\">\n                        Get started by booking your first car.\n                      </p>\n                      <div className=\"mt-6\">\n                        <Button onClick={() => navigate('/')}>\n                          Browse Cars\n                        </Button>\n                      </div>\n                    </motion.div>\n                  ) : (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                      {filteredBookings.map(booking => (\n                        <motion.div\n                          key={booking.id}\n                          initial={{ opacity: 0, scale: 0.9 }}\n                          animate={{ opacity: 1, scale: 1 }}\n                          transition={{ duration: 0.3 }}\n                        >\n                          <Card className=\"overflow-hidden border-0 shadow-lg hover:shadow-xl transition-shadow\">\n                            {booking.cars?.image_urls &&\n                              booking.cars.image_urls.length > 0 && (\n                                <div className=\"relative h-48\">\n                                  <ImageCarousel\n                                    images={booking.cars.image_urls}\n                                  />\n                                </div>\n                              )}\n                            <CardContent className=\"p-6\">\n                              <div className=\"flex justify-between items-start\">\n                                <div>\n                                  <h3 className=\"font-semibold text-lg\">\n                                    {booking.cars?.title}\n                                  </h3>\n                                  <p className=\"text-sm text-muted-foreground\">\n                                    {booking.cars?.make} {booking.cars?.model}\n                                  </p>\n                                </div>\n                                <Badge\n                                  className={getStatusColor(booking.status)}\n                                >\n                                  {booking.status.charAt(0).toUpperCase() +\n                                    booking.status.slice(1)}\n                                </Badge>\n                              </div>\n\n                              <div className=\"mt-4 space-y-2\">\n                                <div className=\"flex justify-between text-sm\">\n                                  <span className=\"text-muted-foreground\">\n                                    Pickup\n                                  </span>\n                                  <span>\n                                    {new Date(\n                                      booking.start_datetime\n                                    ).toLocaleDateString()}\n                                  </span>\n                                </div>\n                                <div className=\"flex justify-between text-sm\">\n                                  <span className=\"text-muted-foreground\">\n                                    Return\n                                  </span>\n                                  <span>\n                                    {new Date(\n                                      booking.end_datetime\n                                    ).toLocaleDateString()}\n                                  </span>\n                                </div>\n                                <div className=\"flex justify-between text-sm\">\n                                  <span className=\"text-muted-foreground\">\n                                    Amount\n                                  </span>\n                                  <span className=\"font-medium\">\n                                    {formatINRFromPaise(booking.total_amount)}\n                                  </span>\n                                </div>\n                                {booking.payment_status && (\n                                  <div className=\"flex justify-between text-sm\">\n                                    <span className=\"text-muted-foreground\">\n                                      Payment\n                                    </span>\n                                    <Badge\n                                      className={getPaymentStatusColor(\n                                        booking.payment_status\n                                      )}\n                                    >\n                                      {getPaymentStatusText(\n                                        booking.payment_status\n                                      )}\n                                    </Badge>\n                                  </div>\n                                )}\n                              </div>\n\n                              <div className=\"mt-4 flex gap-2\">\n                                <Button\n                                  variant=\"outline\"\n                                  size=\"sm\"\n                                  className=\"flex-1\"\n                                  onClick={() => {\n                                    // View booking details\n                                    navigate(`/booking/${booking.id}`);\n                                  }}\n                                >\n                                  View Details\n                                </Button>\n                                {booking.status === 'completed' && (\n                                  <Button\n                                    variant=\"outline\"\n                                    size=\"sm\"\n                                    className=\"flex-1\"\n                                    onClick={() => {\n                                      // Rebook same car\n                                      navigate(`/car/${booking.car_id}`);\n                                    }}\n                                  >\n                                    Rebook\n                                  </Button>\n                                )}\n                              </div>\n                            </CardContent>\n                          </Card>\n                        </motion.div>\n                      ))}\n                    </div>\n                  )}\n                </motion.div>\n              </TabsContent>\n\n              <TabsContent value=\"favorites\" className=\"mt-6\">\n                <motion.div\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ duration: 0.3 }}\n                  className=\"space-y-6\"\n                >\n                  <h2 className=\"text-2xl font-bold\">Your Favorite Cars</h2>\n                  <p className=\"text-muted-foreground\">\n                    Cars you've marked as favorites will appear here.\n                  </p>\n\n                  {favoriteCarIds.length === 0 ? (\n                    <motion.div\n                      initial={{ opacity: 0 }}\n                      animate={{ opacity: 1 }}\n                      className=\"text-center py-12\"\n                    >\n                      <Heart className=\"mx-auto h-12 w-12 text-muted-foreground\" />\n                      <h3 className=\"mt-2 text-sm font-medium text-foreground\">\n                        No favorites yet\n                      </h3>\n                      <p className=\"mt-1 text-sm text-muted-foreground\">\n                        Start browsing cars and mark your favorites.\n                      </p>\n                      <div className=\"mt-6\">\n                        <Button onClick={() => navigate('/')}>\n                          Browse Cars\n                        </Button>\n                      </div>\n                    </motion.div>\n                  ) : (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                      {/* Favorite cars would be displayed here */}\n                      <p>Favorite cars loading...</p>\n                    </div>\n                  )}\n                </motion.div>\n              </TabsContent>\n\n              <TabsContent value=\"notifications\" className=\"mt-6\">\n                <motion.div\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ duration: 0.3 }}\n                  className=\"space-y-6\"\n                >\n                  <h2 className=\"text-2xl font-bold\">Notifications</h2>\n\n                  {notifications.length === 0 ? (\n                    <motion.div\n                      initial={{ opacity: 0 }}\n                      animate={{ opacity: 1 }}\n                      className=\"text-center py-12\"\n                    >\n                      <Bell className=\"mx-auto h-12 w-12 text-muted-foreground\" />\n                      <h3 className=\"mt-2 text-sm font-medium text-foreground\">\n                        No notifications\n                      </h3>\n                      <p className=\"mt-1 text-sm text-muted-foreground\">\n                        You're all caught up!\n                      </p>\n                    </motion.div>\n                  ) : (\n                    <div className=\"space-y-4\">\n                      {notifications.map(notification => (\n                        <motion.div\n                          key={notification.id}\n                          initial={{ opacity: 0, x: -20 }}\n                          animate={{ opacity: 1, x: 0 }}\n                          transition={{ duration: 0.3 }}\n                          className=\"flex items-start gap-4 p-4 rounded-lg border bg-card\"\n                        >\n                          <div className=\"mt-1\">\n                            {getNotificationIcon(notification.type)}\n                          </div>\n                          <div className=\"flex-1\">\n                            <h3 className=\"font-medium\">\n                              {notification.title}\n                            </h3>\n                            <p className=\"text-sm text-muted-foreground mt-1\">\n                              {notification.message}\n                            </p>\n                            <p className=\"text-xs text-muted-foreground mt-2\">\n                              {notification.time}\n                            </p>\n                          </div>\n                        </motion.div>\n                      ))}\n                    </div>\n                  )}\n                </motion.div>\n              </TabsContent>\n\n              <TabsContent value=\"profile\" className=\"mt-6\">\n                <motion.div\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ duration: 0.3 }}\n                  className=\"space-y-6\"\n                >\n                  <h2 className=\"text-2xl font-bold\">Profile Settings</h2>\n\n                  <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                    <motion.div\n                      initial={{ opacity: 0, x: -20 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      transition={{ duration: 0.3 }}\n                    >\n                      <Card className=\"border-0 shadow-lg\">\n                        <CardHeader className=\"pb-4\">\n                          <CardTitle className=\"flex items-center gap-3 text-lg\">\n                            <div className=\"w-8 h-8 bg-gradient-to-r from-primary to-accent-purple rounded-full flex items-center justify-center\">\n                              <User className=\"h-4 w-4 text-white\" />\n                            </div>\n                            Personal Information\n                          </CardTitle>\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                          <div className=\"space-y-2\">\n                            <label className=\"text-sm font-medium text-muted-foreground\">\n                              Email\n                            </label>\n                            <div className=\"p-3 rounded-md bg-muted\">\n                              {user?.email}\n                            </div>\n                          </div>\n                          <div className=\"space-y-2\">\n                            <label className=\"text-sm font-medium text-muted-foreground\">\n                              Phone\n                            </label>\n                            <div className=\"p-3 rounded-md bg-muted\">\n                              {profile?.phone || 'Not provided'}\n                            </div>\n                          </div>\n                          <Button\n                            variant=\"outline\"\n                            className=\"w-full\"\n                            onClick={() => {\n                              // Navigate to profile edit page\n                              navigate('/profile');\n                            }}\n                          >\n                            Edit Profile\n                          </Button>\n                        </CardContent>\n                      </Card>\n                    </motion.div>\n\n                    <motion.div\n                      initial={{ opacity: 0, x: 20 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      transition={{ duration: 0.3 }}\n                    >\n                      <Card className=\"border-0 shadow-lg\">\n                        <CardHeader className=\"pb-4\">\n                          <CardTitle className=\"flex items-center gap-3 text-lg\">\n                            <div className=\"w-8 h-8 bg-gradient-to-r from-primary to-accent-purple rounded-full flex items-center justify-center\">\n                              <Shield className=\"h-4 w-4 text-white\" />\n                            </div>\n                            Security\n                          </CardTitle>\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                          <Button\n                            variant=\"outline\"\n                            className=\"w-full\"\n                            onClick={async () => {\n                              // Change password\n                              try {\n                                const { error } =\n                                  await supabase.auth.resetPasswordForEmail(\n                                    user?.email || ''\n                                  );\n                                if (error) {\n                                  throw error;\n                                }\n                                toast({\n                                  title: 'Password Reset',\n                                  description:\n                                    'Check your email for password reset instructions.',\n                                });\n                              } catch (error) {\n                                console.error('Password reset error:', error);\n                                toast({\n                                  title: 'Error',\n                                  description:\n                                    'Failed to send password reset email.',\n                                  variant: 'destructive',\n                                });\n                              }\n                            }}\n                          >\n                            Change Password\n                          </Button>\n                          <Button\n                            variant=\"destructive\"\n                            className=\"w-full\"\n                            onClick={async () => {\n                              // Delete account\n                              if (\n                                window.confirm(\n                                  'Are you sure you want to delete your account? This action cannot be undone.'\n                                )\n                              ) {\n                                try {\n                                  // Note: Supabase doesn't have a direct delete user method\n                                  // This would need to be implemented on the backend\n                                  toast({\n                                    title: 'Account Deletion',\n                                    description:\n                                      'Account deletion request submitted. Check your email for confirmation.',\n                                  });\n                                } catch (error) {\n                                  console.error(\n                                    'Account deletion error:',\n                                    error\n                                  );\n                                  toast({\n                                    title: 'Error',\n                                    description:\n                                      'Failed to process account deletion request.',\n                                    variant: 'destructive',\n                                  });\n                                }\n                              }\n                            }}\n                          >\n                            Delete Account\n                          </Button>\n                        </CardContent>\n                      </Card>\n                    </motion.div>\n\n                    <motion.div\n                      initial={{ opacity: 0, y: 20 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ duration: 0.3 }}\n                    >\n                      <Card className=\"border-0 shadow-lg\">\n                        <CardHeader className=\"pb-4\">\n                          <CardTitle className=\"flex items-center gap-3 text-lg\">\n                            <div className=\"w-8 h-8 bg-gradient-to-r from-primary to-accent-purple rounded-full flex items-center justify-center\">\n                              <FileText className=\"h-4 w-4 text-white\" />\n                            </div>\n                            Driver's Licenses\n                          </CardTitle>\n                        </CardHeader>\n                        <CardContent>\n                          <LicenseUpload\n                            onUploaded={licenseId => {\n                              console.log(\n                                'License uploaded with ID:',\n                                licenseId\n                              );\n                              toast({\n                                title: 'License Uploaded',\n                                description:\n                                  'Your license has been uploaded successfully.',\n                              });\n                              // License status will be reflected on next dashboard load\n                            }}\n                          />\n                        </CardContent>\n                      </Card>\n                    </motion.div>\n                  </div>\n                </motion.div>\n              </TabsContent>\n            </AnimatePresence>\n          </Tabs>\n        </motion.div>\n      </main>\n      {showPhoneModal && (\n        <PhoneModal\n          onClose={() => setShowPhoneModal(false)}\n          onComplete={handlePhoneModalComplete}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default UserDashboard;\n"],"names":["Award","createLucideIcon","Bell","Share2","ErrorLogger","error","context","severity","errorId","errorData","message","warningData","_err","stored","pendingErrors","data","limit","bySeverity","acc","errorLogger","PhoneModal","onClose","onComplete","user","profile","refreshProfile","useAuth","phone","setPhone","useState","loading","setLoading","setError","useEffect","validatePhone","phoneRegex","cleanedPhone","handleSave","updates","supabase","toast","err","handleKeyDown","e","jsxs","Card","jsx","CardHeader","CardTitle","CardContent","Label","Input","Button","UserDashboard","signOut","profileLoading","navigate","useNavigate","bookings","setBookings","favoriteCarIds","setFavoriteCarIds","userStats","setUserStats","notifications","setNotifications","isLoading","setIsLoading","searchTerm","setSearchTerm","statusFilter","setStatusFilter","showPhoneModal","setShowPhoneModal","_restoredDraft","_setRestoredDraft","pendingBooking","draft","attempts","resolve","handlePhoneModalComplete","mounted","controller","fetchUserBookings","userId","_signal","processedBookings","booking","imageUrls","url","resolveCarImageUrl","path","fetchUserStats","bookingsData","totalBookings","totalSpent","sum","carMakes","b","favoriteCarType","a","v","membershipLevel","loyaltyPoints","co2Saved","fetchNotifications","license","licenseError","licenseData","recentBooking","bookingDate","now","diffTime","diffDays","fetchFavorites","savedFavorites","loadAll","getStatusColor","status","getPaymentStatusColor","getPaymentStatusText","getNotificationIcon","type","Gift","Clock","filteredBookings","matchesSearch","matchesStatus","downloadBookingHistory","csvContent","encodedUri","link","shareProfile","handleSignOut","Car","motion","Download","LogOut","DollarSign","Tabs","TabsList","TabsTrigger","Calendar","Heart","User","AnimatePresence","TabsContent","Search","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","ImageCarousel","Badge","formatINRFromPaise","notification","Shield","FileText","LicenseUpload","licenseId"],"mappings":"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","x_google_ignoreList":[0,1,2]}