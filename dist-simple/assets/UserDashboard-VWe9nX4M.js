import{c as Z,r as m,j as e,t as L,y as H,z as W,v as F,B as p,G as R,w as g,q as we,s as l}from"./index-CvoPUybl.js";import{B as te}from"./badge-GQmDJRT9.js";import{T as be,a as Se,b as M,c as q}from"./tabs-CIO6RQvd.js";import{b as ne,I as oe}from"./input-DMosRNSl.js";import{S as ke,a as Ce,b as _e,c as De,d as U}from"./select-9Q-MVFrG.js";import{LicenseUpload as Pe}from"./LicenseUpload-QKeESwn2.js";import{I as Ae}from"./ImageCarousel-CRNBMNzP.js";import{r as se}from"./SimpleImage-BLRetY9C.js";import{f as re}from"./currency-uWaYrieI.js";import{L as Ee}from"./label-D0-GUShF.js";import{C as z}from"./car-CYTV7zau.js";import{D as Te}from"./download-hr67aklb.js";import{L as Ie}from"./log-out-Cz8cs_d0.js";import{D as Be}from"./dollar-sign-CXmJJeNd.js";import{C as Ue,F as Le}from"./index-ZOP8ASaN.js";import{H as ae}from"./heart-LHr-Tp4K.js";import{U as ie}from"./user-C4_4m0Ko.js";import{A as Fe}from"./index-OBmW1Lsg.js";import{S as Re}from"./search-CPezUsN-.js";import{S as Oe}from"./shield-DC0ZORfi.js";import{C as $e}from"./clock-D7VWts-J.js";import{G as Me}from"./gift--hgZj8e5.js";import"./index-DvATqSkI.js";import"./index-zKAJ-H7_.js";import"./check-C6nFDVMd.js";import"./upload-54noxj45.js";import"./loader-circle-DZ0-E_u0.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=Z("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=Z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=Z("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);class P{static instance;errors=[];maxErrors=100;static getInstance(){return P.instance||(P.instance=new P),P.instance}logError(i,n,c="medium"){const u=`err_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,o={message:i.message,stack:i.stack,context:n,timestamp:new Date().toISOString(),userAgent:typeof navigator<"u"?navigator.userAgent:"unknown",url:typeof window<"u"?window.location.href:"unknown",severity:c};return this.errors.push(o),this.errors.length>this.maxErrors&&this.errors.shift(),this.sendToErrorService(o,u),u}logWarning(i,n){const c={message:i,context:n,timestamp:new Date().toISOString(),type:"warning"};this.sendToMonitoringService(c)}logInfo(i,n){}sendToErrorService(i,n){typeof fetch<"u"&&fetch("/api/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...i,errorId:n})}).catch(c=>{if(typeof localStorage<"u"){const u=localStorage.getItem("pending_errors")??"[]",o=JSON.parse(u);o.push({...i,errorId:n}),localStorage.setItem("pending_errors",JSON.stringify(o))}})}sendToMonitoringService(i){typeof window<"u"&&window.gtag&&window.gtag("event","warning",{event_category:"application",event_label:i.context.component,value:1})}getRecentErrors(i=10){return this.errors.slice(-i)}clearErrors(){this.errors=[]}getErrorStats(){const i=this.errors.reduce((n,c)=>(n[c.severity]=(n[c.severity]??0)+1,n),{});return{total:this.errors.length,bySeverity:i}}}const Ye=P.getInstance();function He({onClose:a,onComplete:i}){const{user:n,profile:c,refreshProfile:u}=ne(),[o,O]=m.useState(c?.phone||""),[w,_]=m.useState(!1),[b,A]=m.useState("");m.useEffect(()=>{c?.phone&&O(c.phone)},[c?.phone]);const $=h=>{const S=/^[6-9]\d{9}$/,T=h.replace(/\D/g,"");return S.test(T)},E=async()=>{if(n){if(!$(o)){A("Please enter a valid 10-digit Indian phone number");return}_(!0),A("");try{const h=o.replace(/\D/g,""),S={id:n.id,phone:h},{data:T,error:D}=await R.from("users").upsert(S,{onConflict:"id"}).select().single();if(D)throw D;u?await u():sessionStorage.setItem("profileJustUpdated","1"),g({title:"Phone Number Saved",description:"Your phone number has been successfully saved."}),i&&i(T),a()}catch(h){console.error("save phone err",h),A("Could not save phone number. Try again."),g({title:"Error",description:h?.message||"Could not save phone number. Try again.",variant:"destructive"})}finally{_(!1)}}},G=h=>{h.key==="Enter"&&!w&&o&&E()};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs(L,{className:"w-full max-w-md mx-4",children:[e.jsx(H,{children:e.jsx(W,{children:"Add Phone Number"})}),e.jsx(F,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ee,{htmlFor:"phone",children:"Phone Number"}),e.jsx(oe,{id:"phone",value:o,onChange:h=>O(h.target.value),onKeyDown:G,placeholder:"+91 1234567890",className:"w-full",disabled:w}),b&&e.jsx("p",{className:"text-sm text-destructive",children:b}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"We need your phone number to confirm your booking and send important updates."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(p,{variant:"outline",onClick:a,disabled:w,children:"Cancel"}),e.jsx(p,{onClick:E,disabled:w||!o||o.length<10,children:w?"Saving...":"Save & Continue"})]})]})})]})})}const vt=()=>{const{user:a,signOut:i,profile:n,profileLoading:c}=ne(),u=we(),[o,O]=m.useState([]),[w,_]=m.useState([]),[b,A]=m.useState(null),[$,E]=m.useState([]),[G,h]=m.useState(!0),[S,T]=m.useState(""),[D,le]=m.useState("all"),[ce,J]=m.useState(!1),[We,de]=m.useState(null);m.useEffect(()=>{if(console.log("UserDashboard useEffect triggered:",{user:a,profile:n,profileLoading:c}),!a?.id)return;const t=sessionStorage.getItem("pendingBooking");if(t)try{const x=JSON.parse(t);de(x),(async()=>{let j=0;for(;c&&j<50;)await new Promise(V=>setTimeout(V,100)),j++;n?.phone?console.log("Phone exists, booking can proceed"):(console.log("Showing phone modal to collect phone number"),J(!0))})()}catch(x){console.error("Failed to parse pending booking:",x),sessionStorage.removeItem("pendingBooking")}},[a?.id,n,c,a]);const me=()=>{console.log("Phone modal completed, booking can proceed"),J(!1)};m.useEffect(()=>{if(console.log("UserDashboard effect run:",{userId:a?.id}),!a?.id)return;let t=!0;const x=new AbortController,y=async(d,k)=>{console.log("fetchUserBookings called for userId=",d);try{const{data:r,error:v}=await R.from("bookings").select(`
            *,
            cars (
              title,
              make,
              model,
              image_urls,
              image_paths
            ),
            licenses (
              id,
              verified
            )
          `).eq("user_id",d).order("created_at",{ascending:!1});if(v)throw v;if(!t)return;const N=r?r.map(s=>{if(s.cars){let f=[];return Array.isArray(s.cars.image_urls)&&s.cars.image_urls.length>0?f=s.cars.image_urls.map(C=>se(C)):Array.isArray(s.cars.image_paths)&&s.cars.image_paths.length>0&&(f=s.cars.image_paths.map(C=>se(C))),{...s,cars:{...s.cars,image_urls:f}}}return s}):[];if(!t)return;O(N||[])}catch(r){if(r.name==="AbortError"||(Ye.logError(r,{component:"UserDashboard",action:"fetchUserBookings",userId:d}),!t))return;g({title:"Error",description:"Failed to load your bookings",variant:"destructive"})}},j=async(d,k)=>{console.log("fetchUserStats called for userId=",d);try{const{data:r,error:v}=await R.from("bookings").select("total_amount, status, cars(make)").eq("user_id",d);if(v)throw v;if(!t)return;if(r){const N=r.length,s=r.reduce((B,Q)=>B+(Q.total_amount||0),0),f=r.map(B=>B.cars?.make).filter(Boolean),C=f.length>0&&f.sort((B,Q)=>f.filter(X=>X===B).length-f.filter(X=>X===Q).length).pop()||"N/A",K=s>1e3?"Gold":s>500?"Silver":"Bronze",I=Math.floor(s/10),Ne=N*2.3;if(!t)return;A({totalBookings:N,totalSpent:s,favoriteCarType:C,membershipLevel:K,loyaltyPoints:I,co2Saved:Ne})}}catch(r){if(r.name==="AbortError")return;console.error("Error fetching user stats:",r)}},V=async(d,k)=>{console.log("fetchNotifications called for userId=",d);try{const r=[],{data:v,error:N}=await R.from("licenses").select("*").eq("user_id",d).maybeSingle();if(N&&N.code!=="PGRST116")throw N;if(!t)return;if(!v)r.push({id:1,title:"Upload Your License",message:"Upload your driving license to start booking cars",type:"warning",time:"Pending",created_at:new Date().toISOString()});else{const s=v;s.verified===null?r.push({id:2,title:"License Under Review",message:"Your license is being verified. This usually takes 1-2 hours.",type:"info",time:new Date(s.created_at).toLocaleDateString(),created_at:s.created_at}):s.verified===!0&&r.push({id:3,title:"License Verified!",message:"Your driving license has been verified. You can now book cars.",type:"success",time:new Date(s.created_at).toLocaleDateString(),created_at:s.created_at})}if(o.length>0){const s=o[0],f=new Date(s.start_datetime),C=new Date,K=f.getTime()-C.getTime(),I=Math.ceil(K/(1e3*60*60*24));I>=0&&I<=1&&r.push({id:4,title:"Upcoming Booking",message:`Your booking for ${s.cars?.title} starts ${I===0?"today":"tomorrow"}`,type:"info",time:f.toLocaleDateString(),created_at:s.created_at})}if(r.length===0&&r.push({id:5,title:"Welcome to Azure Drive Hub!",message:"Explore our premium fleet and start your journey",type:"success",time:"Welcome",created_at:new Date().toISOString()}),!t)return;E(r)}catch(r){if(r.name==="AbortError"||(console.error("Error in fetchNotifications:",r),!t))return;E([{id:1,title:"Welcome!",message:"Welcome to Azure Drive Hub",type:"info",time:"Now",created_at:new Date().toISOString()}])}},je=async d=>{console.log("fetchFavorites called for userId=",d);try{const k=localStorage.getItem(`favorites_${d}`);if(k){if(!t)return;_(JSON.parse(k))}else{if(!t)return;_([])}}catch(k){if(console.error("Error loading favorites:",k),!t)return;_([])}};async function ve(){if(a?.id)try{if(h(!0),!a?.id)return;await Promise.all([y(a.id,x.signal),j(a.id,x.signal),V(a.id,x.signal),je(a.id)])}catch(d){if(d.name==="AbortError")return;console.error("UserDashboard loadAll error",d),g({title:"Dashboard Error",description:"Failed to load dashboard data. Please try again.",variant:"destructive"})}finally{t&&h(!1)}}return ve(),()=>{t=!1,x.abort()}},[a?.id,o]);const ue=t=>{switch(t){case"confirmed":return"bg-success text-success-foreground";case"pending":return"bg-warning text-warning-foreground";case"completed":return"bg-primary text-primary-foreground";case"cancelled":return"bg-destructive text-destructive-foreground";default:return"bg-muted text-muted-foreground"}},he=t=>{switch(t){case"paid":return"bg-success text-success-foreground";case"partial_hold":return"bg-warning text-warning-foreground";case"unpaid":return"bg-destructive text-destructive-foreground";default:return"bg-muted text-muted-foreground"}},xe=t=>{switch(t){case"paid":return"Paid";case"partial_hold":return"Advance Paid";case"unpaid":return"Unpaid";default:return"Unknown"}},pe=t=>{switch(t){case"info":return e.jsx(Y,{className:"h-4 w-4 text-blue-600"});case"success":return e.jsx(Me,{className:"h-4 w-4 text-green-600"});case"warning":return e.jsx($e,{className:"h-4 w-4 text-yellow-600"});default:return e.jsx(Y,{className:"h-4 w-4"})}},ee=o.filter(t=>{const x=t.cars?.title?.toLowerCase().includes(S.toLowerCase())||t.cars?.make?.toLowerCase().includes(S.toLowerCase()),y=D==="all"||t.status===D;return x&&y}),fe=()=>{const t=`data:text/csv;charset=utf-8,Car,Start Date,End Date,Status,Amount
`+o.map(j=>`"${j.cars?.title}",${j.start_datetime},${j.end_datetime},${j.status},${j.total_amount}`).join(`
`),x=encodeURI(t),y=document.createElement("a");y.setAttribute("href",x),y.setAttribute("download","booking_history.csv"),document.body.appendChild(y),y.click(),document.body.removeChild(y),g({title:"Download Complete",description:"Your booking history has been downloaded"})},ge=()=>{navigator.share?navigator.share({title:"RP CARS Profile",text:`Check out my car rental profile! ${b?.totalBookings} bookings completed.`,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),g({title:"Link Copied",description:"Profile link copied to clipboard"}))},ye=async()=>{try{await i()}catch(t){console.error("Sign out error:",t)}};return G?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-primary-light/5 to-accent-purple/5",children:e.jsx("header",{className:"bg-white/90 backdrop-blur-xl border-b border-border/30 sticky top-0 z-50 shadow-sm",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-primary to-accent-purple rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(z,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-accent-purple bg-clip-text text-transparent",children:"RP CARS"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Dashboard"})]})]})})})})}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-white/90 backdrop-blur-xl border-b border-border/30 sticky top-0 z-50 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(l.div,{whileHover:{scale:1.05},className:"w-12 h-12 bg-gradient-to-r from-primary to-accent-purple rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(z,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-accent-purple bg-clip-text text-transparent",children:"RP CARS"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Dashboard"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(p,{variant:"outline",onClick:ge,children:[e.jsx(ze,{className:"h-4 w-4 mr-2"}),"Share Profile"]}),e.jsxs(p,{variant:"outline",onClick:fe,children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Download History"]}),e.jsxs(p,{variant:"outline",onClick:ye,children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(l.h2,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary to-accent-purple bg-clip-text text-transparent",children:"Welcome back!"}),e.jsx(l.p,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"text-muted-foreground",children:a?.email})]}),e.jsxs(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-accent-purple/10 rounded-xl p-4 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Bookings"})]}),e.jsx("p",{className:"text-2xl font-bold text-primary mt-1",children:b?.totalBookings||0})]}),e.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-accent-purple/10 rounded-xl p-4 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Spent"})]}),e.jsx("p",{className:"text-2xl font-bold text-primary mt-1",children:re(b?.totalSpent||0)})]}),e.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-accent-purple/10 rounded-xl p-4 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Membership"})]}),e.jsx("p",{className:"text-2xl font-bold text-primary mt-1",children:b?.membershipLevel||"Bronze"})]})]})]}),e.jsxs(be,{defaultValue:"bookings",className:"w-full",children:[e.jsxs(Se,{className:"grid w-full grid-cols-2 sm:grid-cols-4",children:[e.jsxs(M,{value:"bookings",className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Bookings"})]}),e.jsxs(M,{value:"favorites",className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Favorites"})]}),e.jsxs(M,{value:"notifications",className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),e.jsxs(M,{value:"profile",className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Profile"})]})]}),e.jsxs(Fe,{mode:"wait",children:[e.jsx(q,{value:"bookings",className:"mt-6",children:e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(oe,{placeholder:"Search bookings...",value:S,onChange:t=>T(t.target.value),className:"pl-10"})]}),e.jsxs(ke,{value:D,onValueChange:le,children:[e.jsx(Ce,{className:"w-full sm:w-40",children:e.jsx(_e,{placeholder:"Status"})}),e.jsxs(De,{children:[e.jsx(U,{value:"all",children:"All Statuses"}),e.jsx(U,{value:"confirmed",children:"Confirmed"}),e.jsx(U,{value:"pending",children:"Pending"}),e.jsx(U,{value:"completed",children:"Completed"}),e.jsx(U,{value:"cancelled",children:"Cancelled"})]})]})]}),ee.length===0?e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx(z,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-foreground",children:"No bookings"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Get started by booking your first car."}),e.jsx("div",{className:"mt-6",children:e.jsx(p,{onClick:()=>u("/"),children:"Browse Cars"})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ee.map(t=>e.jsx(l.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:e.jsxs(L,{className:"overflow-hidden border-0 shadow-lg hover:shadow-xl transition-shadow",children:[t.cars?.image_urls&&t.cars.image_urls.length>0&&e.jsx("div",{className:"relative h-48",children:e.jsx(Ae,{images:t.cars.image_urls})}),e.jsxs(F,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.cars?.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.cars?.make," ",t.cars?.model]})]}),e.jsx(te,{className:ue(t.status),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Pickup"}),e.jsx("span",{children:new Date(t.start_datetime).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Return"}),e.jsx("span",{children:new Date(t.end_datetime).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount"}),e.jsx("span",{className:"font-medium",children:re(t.total_amount)})]}),t.payment_status&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Payment"}),e.jsx(te,{className:he(t.payment_status),children:xe(t.payment_status)})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx(p,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{u(`/booking/${t.id}`)},children:"View Details"}),t.status==="completed"&&e.jsx(p,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{u(`/car/${t.car_id}`)},children:"Rebook"})]})]})]})},t.id))})]})}),e.jsx(q,{value:"favorites",className:"mt-6",children:e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Your Favorite Cars"}),e.jsx("p",{className:"text-muted-foreground",children:"Cars you've marked as favorites will appear here."}),w.length===0?e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx(ae,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-foreground",children:"No favorites yet"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Start browsing cars and mark your favorites."}),e.jsx("div",{className:"mt-6",children:e.jsx(p,{onClick:()=>u("/"),children:"Browse Cars"})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx("p",{children:"Favorite cars loading..."})})]})}),e.jsx(q,{value:"notifications",className:"mt-6",children:e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Notifications"}),$.length===0?e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx(Y,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-foreground",children:"No notifications"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"You're all caught up!"})]}):e.jsx("div",{className:"space-y-4",children:$.map(t=>e.jsxs(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},className:"flex items-start gap-4 p-4 rounded-lg border bg-card",children:[e.jsx("div",{className:"mt-1",children:pe(t.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:t.time})]})]},t.id))})]})}),e.jsx(q,{value:"profile",className:"mt-6",children:e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Profile Settings"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs(L,{className:"border-0 shadow-lg",children:[e.jsx(H,{className:"pb-4",children:e.jsxs(W,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-accent-purple rounded-full flex items-center justify-center",children:e.jsx(ie,{className:"h-4 w-4 text-white"})}),"Personal Information"]})}),e.jsxs(F,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("div",{className:"p-3 rounded-md bg-muted",children:a?.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),e.jsx("div",{className:"p-3 rounded-md bg-muted",children:n?.phone||"Not provided"})]}),e.jsx(p,{variant:"outline",className:"w-full",onClick:()=>{u("/profile")},children:"Edit Profile"})]})]})}),e.jsx(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs(L,{className:"border-0 shadow-lg",children:[e.jsx(H,{className:"pb-4",children:e.jsxs(W,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-accent-purple rounded-full flex items-center justify-center",children:e.jsx(Oe,{className:"h-4 w-4 text-white"})}),"Security"]})}),e.jsxs(F,{className:"space-y-4",children:[e.jsx(p,{variant:"outline",className:"w-full",onClick:async()=>{try{const{error:t}=await R.auth.resetPasswordForEmail(a?.email||"");if(t)throw t;g({title:"Password Reset",description:"Check your email for password reset instructions."})}catch(t){console.error("Password reset error:",t),g({title:"Error",description:"Failed to send password reset email.",variant:"destructive"})}},children:"Change Password"}),e.jsx(p,{variant:"destructive",className:"w-full",onClick:async()=>{if(window.confirm("Are you sure you want to delete your account? This action cannot be undone."))try{g({title:"Account Deletion",description:"Account deletion request submitted. Check your email for confirmation."})}catch(t){console.error("Account deletion error:",t),g({title:"Error",description:"Failed to process account deletion request.",variant:"destructive"})}},children:"Delete Account"})]})]})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs(L,{className:"border-0 shadow-lg",children:[e.jsx(H,{className:"pb-4",children:e.jsxs(W,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-accent-purple rounded-full flex items-center justify-center",children:e.jsx(Le,{className:"h-4 w-4 text-white"})}),"Driver's Licenses"]})}),e.jsx(F,{children:e.jsx(Pe,{onUploaded:t=>{console.log("License uploaded with ID:",t),g({title:"License Uploaded",description:"Your license has been uploaded successfully."})}})})]})})]})]})})]})]})]})}),ce&&e.jsx(He,{onClose:()=>J(!1),onComplete:me})]})};export{vt as default};
//# sourceMappingURL=UserDashboard-VWe9nX4M.js.map
