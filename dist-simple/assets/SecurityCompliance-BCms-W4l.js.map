{"version":3,"file":"SecurityCompliance-BCms-W4l.js","sources":["../../node_modules/lucide-react/dist/esm/icons/log-in.js","../../src/components/SecurityCompliance.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LogIn = createLucideIcon(\"LogIn\", [\n  [\"path\", { d: \"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4\", key: \"u53s6r\" }],\n  [\"polyline\", { points: \"10 17 15 12 10 7\", key: \"1ail0h\" }],\n  [\"line\", { x1: \"15\", x2: \"3\", y1: \"12\", y2: \"12\", key: \"v6grx8\" }]\n]);\n\nexport { LogIn as default };\n//# sourceMappingURL=log-in.js.map\n","import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Shield, Search, Download, Eye, User, LogIn, Car, FileText, Settings } from 'lucide-react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { toast } from '@/hooks/use-toast';\r\nimport { supabase } from '@/integrations/supabase/client';\r\n\r\ninterface AuditLog {\r\n  id: string;\r\n  action: string;\r\n  description: string;\r\n  user_id: string | null;\r\n  user_email: string | null;\r\n  metadata: any;\r\n  timestamp: string;\r\n  // Add user property for the join\r\n  user?: {\r\n    full_name: string | null;\r\n    email: string | null;\r\n  } | null;\r\n}\r\n\r\ninterface KYCStatus {\r\n  user_id: string;\r\n  full_name: string | null;\r\n  email: string;\r\n  kyc_status: 'pending' | 'verified' | 'rejected';\r\n  kyc_documents: string[];\r\n  submitted_at: string;\r\n  verified_at?: string;\r\n  verified_by?: string;\r\n}\r\n\r\n// Define the user interface for KYC data\r\ninterface User {\r\n  id: string;\r\n  full_name: string | null;\r\n  email: string | null;\r\n  license_path: string | null;\r\n  license_verified: boolean | null;\r\n  created_at: string;\r\n}\r\n\r\nconst SecurityCompliance: React.FC = () => {\r\n  const [auditLogs, setAuditLogs] = useState<AuditLog[]>([]);\r\n  const [filteredLogs, setFilteredLogs] = useState<AuditLog[]>([]);\r\n  const [kycStatuses, setKycStatuses] = useState<KYCStatus[]>([]);\r\n  const [filteredKyc, setFilteredKyc] = useState<KYCStatus[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState('audit');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [actionFilter, setActionFilter] = useState('all');\r\n  const [kycFilter, setKycFilter] = useState('all');\r\n\r\n  useEffect(() => {\r\n    fetchAuditLogs();\r\n    fetchKycStatuses();\r\n  }, []);\r\n\r\n  // Filter audit logs\r\n  useEffect(() => {\r\n    let filtered = auditLogs;\r\n    \r\n    if (searchTerm) {\r\n      filtered = filtered.filter(log => \r\n        log.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        log.user_email?.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    }\r\n    \r\n    if (actionFilter !== 'all') {\r\n      filtered = filtered.filter(log => log.action === actionFilter);\r\n    }\r\n    \r\n    setFilteredLogs(filtered);\r\n  }, [auditLogs, searchTerm, actionFilter]);\r\n\r\n  // Filter KYC statuses\r\n  useEffect(() => {\r\n    let filtered = kycStatuses;\r\n    \r\n    if (searchTerm) {\r\n      filtered = filtered.filter(kyc => \r\n        kyc.full_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        kyc.email.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    }\r\n    \r\n    if (kycFilter !== 'all') {\r\n      filtered = filtered.filter(kyc => kyc.kyc_status === kycFilter);\r\n    }\r\n    \r\n    setFilteredKyc(filtered);\r\n  }, [kycStatuses, searchTerm, kycFilter]);\r\n\r\n  const fetchAuditLogs = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('audit_logs')\r\n        .select(`\r\n          *,\r\n          user:users(full_name, email)\r\n        `)\r\n        .order('timestamp', { ascending: false })\r\n        .limit(100);\r\n\r\n      if (error) {throw error;}\r\n\r\n      // Transform data to include user email with proper type checking\r\n      const logsWithUser: AuditLog[] = (data || []).map(log => ({\r\n        ...log as AuditLog,\r\n        user_email: (log as any).user?.email || ((log as AuditLog).metadata as any)?.user_email || 'System'\r\n      }));\r\n\r\n      setAuditLogs(logsWithUser);\r\n      setFilteredLogs(logsWithUser);\r\n    } catch (error) {\r\n      console.error('Error fetching audit logs:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load audit logs\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const fetchKycStatuses = async () => {\r\n    try {\r\n      // Fetch actual KYC data from users table\r\n      const { data, error } = await supabase\r\n        .from('users')\r\n        .select('id, full_name, email, license_path, license_verified, created_at')\r\n        .not('license_path', 'is', null);\r\n\r\n      if (error) {throw error;}\r\n\r\n      // Transform data to match KYCStatus interface with proper type checking\r\n      const kycData: KYCStatus[] = (data || []).map((user: User) => ({\r\n        user_id: user.id,\r\n        full_name: user.full_name,\r\n        email: user.email || '',\r\n        kyc_status: user.license_verified ? 'verified' : 'pending',\r\n        kyc_documents: user.license_path ? [user.license_path] : [],\r\n        submitted_at: user.created_at || new Date().toISOString(),\r\n      }));\r\n\r\n      setKycStatuses(kycData);\r\n      setFilteredKyc(kycData);\r\n    } catch (error) {\r\n      console.error('Error fetching KYC statuses:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load KYC statuses\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const exportAuditLogs = () => {\r\n    // Ensure filteredLogs is an array before spreading\r\n    const logData = Array.isArray(filteredLogs) ? filteredLogs : [];\r\n    \r\n    const csvContent = [\r\n      ['Timestamp', 'Action', 'Description', 'User', 'Metadata'],\r\n      ...logData.map(log => [\r\n        new Date(log.timestamp).toISOString(),\r\n        log.action,\r\n        log.description,\r\n        log.user_email || 'N/A',\r\n        JSON.stringify(log.metadata || {})\r\n      ])\r\n    ].map(row => row.join(',')).join('\\n');\r\n\r\n    const blob = new Blob([csvContent], { type: 'text/csv' });\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `audit-logs-${new Date().toISOString().split('T')[0]}.csv`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    window.URL.revokeObjectURL(url);\r\n\r\n    toast({\r\n      title: \"Export Complete\",\r\n      description: \"Audit logs exported successfully\",\r\n    });\r\n  };\r\n\r\n  const getActionIcon = (action: string) => {\r\n    switch (action) {\r\n      case 'login': return <LogIn className=\"w-4 h-4\" />;\r\n      case 'car_create': return <Car className=\"w-4 h-4\" />;\r\n      case 'car_update': return <Car className=\"w-4 h-4\" />;\r\n      case 'customer_suspend': return <User className=\"w-4 h-4\" />;\r\n      case 'settings_update': return <Settings className=\"w-4 h-4\" />;\r\n      default: return <FileText className=\"w-4 h-4\" />;\r\n    }\r\n  };\r\n\r\n  const getActionColor = (action: string) => {\r\n    switch (action) {\r\n      case 'login': return 'bg-blue-100 text-blue-800';\r\n      case 'car_create': return 'bg-green-100 text-green-800';\r\n      case 'car_update': return 'bg-yellow-100 text-yellow-800';\r\n      case 'customer_suspend': return 'bg-red-100 text-red-800';\r\n      case 'settings_update': return 'bg-purple-100 text-purple-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getKycStatusBadge = (status: string) => {\r\n    switch (status) {\r\n      case 'verified': return <Badge className=\"bg-success\">Verified</Badge>;\r\n      case 'pending': return <Badge className=\"bg-warning\">Pending</Badge>;\r\n      case 'rejected': return <Badge variant=\"destructive\">Rejected</Badge>;\r\n      default: return <Badge variant=\"secondary\">Unknown</Badge>;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center p-8\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold\">Security & Compliance</h2>\r\n        <p className=\"text-muted-foreground\">\r\n          Audit logs and KYC management\r\n        </p>\r\n      </div>\r\n      \r\n      {/* Tabs */}\r\n      <div className=\"flex border-b\">\r\n        <Button\r\n          variant={activeTab === 'audit' ? 'default' : 'ghost'}\r\n          onClick={() => setActiveTab('audit')}\r\n          className=\"flex items-center gap-2\"\r\n        >\r\n          <FileText className=\"w-4 h-4\" />\r\n          Audit Logs\r\n        </Button>\r\n        <Button\r\n          variant={activeTab === 'kyc' ? 'default' : 'ghost'}\r\n          onClick={() => setActiveTab('kyc')}\r\n          className=\"flex items-center gap-2\"\r\n        >\r\n          <Shield className=\"w-4 h-4\" />\r\n          KYC Management\r\n        </Button>\r\n      </div>\r\n      \r\n      {activeTab === 'audit' ? (\r\n        <>\r\n          {/* Audit Logs Filters */}\r\n          <Card>\r\n            <CardContent className=\"p-6\">\r\n              <div className=\"flex flex-col md:flex-row gap-4\">\r\n                {/* Search */}\r\n                <div className=\"flex-1 relative\">\r\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                  <Input\r\n                    placeholder=\"Search audit logs...\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                    className=\"pl-10\"\r\n                  />\r\n                </div>\r\n                \r\n                {/* Action Filter */}\r\n                <div className=\"flex gap-2\">\r\n                  <Select value={actionFilter} onValueChange={setActionFilter}>\r\n                    <SelectTrigger className=\"w-40\">\r\n                      <SelectValue placeholder=\"Action Type\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"all\">All Actions</SelectItem>\r\n                      <SelectItem value=\"login\">Login</SelectItem>\r\n                      <SelectItem value=\"car_create\">Car Create</SelectItem>\r\n                      <SelectItem value=\"car_update\">Car Update</SelectItem>\r\n                      <SelectItem value=\"customer_suspend\">Customer Suspend</SelectItem>\r\n                      <SelectItem value=\"settings_update\">Settings Update</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                  \r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={() => {\r\n                      setSearchTerm('');\r\n                      setActionFilter('all');\r\n                    }}\r\n                  >\r\n                    Clear\r\n                  </Button>\r\n                  \r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={exportAuditLogs}\r\n                    className=\"flex items-center gap-2\"\r\n                  >\r\n                    <Download className=\"w-4 h-4\" />\r\n                    Export\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Results Count */}\r\n              <div className=\"mt-4 text-sm text-muted-foreground\">\r\n                Showing {filteredLogs.length} of {auditLogs.length} audit logs\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n          \r\n          {/* Audit Logs Table */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Recent Audit Logs</CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full\">\r\n                  <thead>\r\n                    <tr className=\"border-b\">\r\n                      <th className=\"text-left py-3 px-4\">Timestamp</th>\r\n                      <th className=\"text-left py-3 px-4\">Action</th>\r\n                      <th className=\"text-left py-3 px-4\">Description</th>\r\n                      <th className=\"text-left py-3 px-4\">User</th>\r\n                      <th className=\"text-left py-3 px-4\">Details</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {filteredLogs.map((log) => (\r\n                      <motion.tr \r\n                        key={log.id}\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        className=\"border-b hover:bg-muted/50\"\r\n                      >\r\n                        <td className=\"py-3 px-4\">\r\n                          <div className=\"text-sm\">\r\n                            {new Date(log.timestamp).toLocaleString()}\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"py-3 px-4\">\r\n                          <Badge className={getActionColor(log.action)}>\r\n                            <div className=\"flex items-center gap-1\">\r\n                              {getActionIcon(log.action)}\r\n                              <span className=\"capitalize\">{log.action.replace('_', ' ')}</span>\r\n                            </div>\r\n                          </Badge>\r\n                        </td>\r\n                        <td className=\"py-3 px-4\">\r\n                          <div className=\"text-sm\">\r\n                            {log.description}\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"py-3 px-4\">\r\n                          <div className=\"text-sm\">\r\n                            {log.user_email || 'System'}\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"py-3 px-4\">\r\n                          <Button size=\"sm\" variant=\"outline\">\r\n                            <Eye className=\"w-4 h-4\" />\r\n                          </Button>\r\n                        </td>\r\n                      </motion.tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              \r\n              {filteredLogs.length === 0 && (\r\n                <div className=\"text-center py-8\">\r\n                  <FileText className=\"w-12 h-12 mx-auto text-muted-foreground mb-4\" />\r\n                  <h3 className=\"text-lg font-medium mb-2\">No audit logs found</h3>\r\n                  <p className=\"text-muted-foreground\">\r\n                    Try adjusting your search or filter criteria\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </>\r\n      ) : (\r\n        <>\r\n          {/* KYC Filters */}\r\n          <Card>\r\n            <CardContent className=\"p-6\">\r\n              <div className=\"flex flex-col md:flex-row gap-4\">\r\n                {/* Search */}\r\n                <div className=\"flex-1 relative\">\r\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                  <Input\r\n                    placeholder=\"Search by name or email...\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                    className=\"pl-10\"\r\n                  />\r\n                </div>\r\n                \r\n                {/* Status Filter */}\r\n                <div className=\"flex gap-2\">\r\n                  <Select value={kycFilter} onValueChange={setKycFilter}>\r\n                    <SelectTrigger className=\"w-32\">\r\n                      <SelectValue placeholder=\"Status\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"all\">All Status</SelectItem>\r\n                      <SelectItem value=\"verified\">Verified</SelectItem>\r\n                      <SelectItem value=\"pending\">Pending</SelectItem>\r\n                      <SelectItem value=\"rejected\">Rejected</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                  \r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={() => {\r\n                      setSearchTerm('');\r\n                      setKycFilter('all');\r\n                    }}\r\n                  >\r\n                    Clear\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Results Count */}\r\n              <div className=\"mt-4 text-sm text-muted-foreground\">\r\n                Showing {filteredKyc.length} of {kycStatuses.length} KYC records\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n          \r\n          {/* KYC Table */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>KYC Management</CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full\">\r\n                  <thead>\r\n                    <tr className=\"border-b\">\r\n                      <th className=\"text-left py-3 px-4\">User</th>\r\n                      <th className=\"text-left py-3 px-4\">Email</th>\r\n                      <th className=\"text-left py-3 px-4\">Status</th>\r\n                      <th className=\"text-left py-3 px-4\">Submitted</th>\r\n                      <th className=\"text-left py-3 px-4\">Verified</th>\r\n                      <th className=\"text-left py-3 px-4\">Documents</th>\r\n                      <th className=\"text-left py-3 px-4\">Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {filteredKyc.map((kyc) => (\r\n                      <motion.tr \r\n                        key={kyc.user_id}\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        className=\"border-b hover:bg-muted/50\"\r\n                      >\r\n                        <td className=\"py-3 px-4\">\r\n                          <div className=\"font-medium\">\r\n                            {kyc.full_name || 'Unnamed User'}\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"py-3 px-4\">\r\n                          <div className=\"text-sm\">\r\n                            {kyc.email}\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"py-3 px-4\">\r\n                          {getKycStatusBadge(kyc.kyc_status)}\r\n                        </td>\r\n                        <td className=\"py-3 px-4\">\r\n                          <div className=\"text-sm\">\r\n                            {new Date(kyc.submitted_at).toLocaleDateString()}\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"py-3 px-4\">\r\n                          <div className=\"text-sm\">\r\n                            {kyc.verified_at \r\n                              ? new Date(kyc.verified_at).toLocaleDateString()\r\n                              : 'Not verified'}\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"py-3 px-4\">\r\n                          <div className=\"text-sm\">\r\n                            {kyc.kyc_documents.length} document(s)\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"py-3 px-4\">\r\n                          <div className=\"flex gap-2\">\r\n                            <Button size=\"sm\" variant=\"outline\">\r\n                              <Eye className=\"w-4 h-4\" />\r\n                            </Button>\r\n                          </div>\r\n                        </td>\r\n                      </motion.tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              \r\n              {filteredKyc.length === 0 && (\r\n                <div className=\"text-center py-8\">\r\n                  <Shield className=\"w-12 h-12 mx-auto text-muted-foreground mb-4\" />\r\n                  <h3 className=\"text-lg font-medium mb-2\">No KYC records found</h3>\r\n                  <p className=\"text-muted-foreground\">\r\n                    Try adjusting your search or filter criteria\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SecurityCompliance;"],"names":["LogIn","createLucideIcon","SecurityCompliance","auditLogs","setAuditLogs","useState","filteredLogs","setFilteredLogs","kycStatuses","setKycStatuses","filteredKyc","setFilteredKyc","loading","setLoading","activeTab","setActiveTab","searchTerm","setSearchTerm","actionFilter","setActionFilter","kycFilter","setKycFilter","useEffect","fetchAuditLogs","fetchKycStatuses","filtered","log","kyc","data","error","supabase","logsWithUser","toast","kycData","user","exportAuditLogs","logData","csvContent","row","blob","url","a","getActionIcon","action","jsx","Car","User","Settings","FileText","getActionColor","getKycStatusBadge","status","Badge","jsxs","Button","Shield","Fragment","Card","CardContent","Search","Input","e","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","Download","CardHeader","CardTitle","motion","Eye"],"mappings":"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","x_google_ignoreList":[0]}