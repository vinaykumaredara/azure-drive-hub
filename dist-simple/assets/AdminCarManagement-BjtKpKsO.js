import{c as _e,G as v,r as u,w as P,j as e,B as C,t as X,y as we,z as Ce,v as Z,s as be,_ as Ne}from"./index-CvoPUybl.js";import{I as b}from"./input-DMosRNSl.js";import{L as h}from"./label-D0-GUShF.js";import{T as Se}from"./textarea-AIHptgKh.js";import{S as O,a as W,b as B,c as z,d}from"./select-9Q-MVFrG.js";import{D as ee,a as se,b as te,c as ae}from"./dialog-BHKTKxbD.js";import{B as q}from"./badge-GQmDJRT9.js";import{u as Fe}from"./useRealtime-Cu8CyKs1.js";import{f as Ie,t as re}from"./currency-uWaYrieI.js";import{s as De,S as Ee}from"./SimpleImage-BLRetY9C.js";import{I as Ae}from"./ImageCarousel-CRNBMNzP.js";import{P as ie,S as Ue,T as J}from"./trash-2-DXPKM_Tb.js";import{C as ke}from"./car-CYTV7zau.js";import{U as Pe}from"./upload-54noxj45.js";import"./index-zKAJ-H7_.js";import"./index-ZOP8ASaN.js";import"./check-C6nFDVMd.js";import"./index-JvH1gesy.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=_e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function Le(n){return n&&De(n)}const Me="https://images.unsplash.com/photo-1494905998402-395d579af36f?w=800&h=600&fit=crop&crop=center&auto=format&q=80";async function le(n,o){if(!n.type.startsWith("image/"))throw new Error(`File ${n.name} is not a valid image.`);const i=Date.now(),p=crypto.randomUUID(),c=n.name.split(".").pop()||"jpg",m=`cars/${o}/${i}_${p}.${c}`,{error:y}=await v.storage.from("cars-photos").upload(m,n,{cacheControl:"public, max-age=31536000, immutable"});if(y)throw y;const{data:g}=v.storage.from("cars-photos").getPublicUrl(m),_=g?.publicUrl;if(!_)throw await v.storage.from("cars-photos").remove([m]),new Error("Failed to generate public URL for uploaded image");return{path:m,url:_}}async function K(n,o){const i=[],p=[];try{for(const c of n){const m=await le(c,o);i.push(m),p.push(m.path)}return{paths:i.map(c=>c.path),urls:i.map(c=>c.url)}}catch(c){throw p.length>0&&await v.storage.from("cars-photos").remove(p),c}}async function T(n){if(!Array.isArray(n)||n.length===0){console.log("[IMAGE-CRUD] No file paths provided for removal");return}const o=n.filter(i=>i&&typeof i=="string"&&i.length>0);if(o.length===0){console.log("[IMAGE-CRUD] No valid file paths to remove");return}console.log(`[IMAGE-CRUD] Attempting to remove ${o.length} images from storage`);try{const{error:i}=await v.storage.from("cars-photos").remove(o);i?console.warn("[IMAGE-CRUD] Warning: Some images could not be removed from storage:",i):console.log(`[IMAGE-CRUD] Successfully removed ${o.length} images from storage`)}catch(i){console.warn("[IMAGE-CRUD] Warning: Error removing images from storage:",i)}}async function ne(n,o){let i=[],p=[];try{if(o&&o.length>0){const{paths:g,urls:_}=await K(o,`new-${Date.now()}`);i=g,p=_}const c={...n,image_urls:p.length>0?p:[Me],image_paths:i.length>0?i:null,status:n.status||"published"},{data:m,error:y}=await v.from("cars").insert([c]).select().single();if(y)throw i.length>0&&await T(i),y;return i.length>0&&m?.id,m}catch(c){throw i.length>0&&await T(i),c}}async function oe(n,o,i,p=!1,c=[]){let m=[],y=[],g=[],_=[];try{const{data:x,error:F}=await v.from("cars").select("image_urls, image_paths").eq("id",n).single();if(F)throw F;let j=x?.image_urls&&Array.isArray(x.image_urls)?[...x.image_urls]:[],N=x?.image_paths&&Array.isArray(x.image_paths)?[...x.image_paths]:[];if(c.length>0){const D=j.filter(k=>!c.includes(k)),U=N.filter((k,S)=>D.includes(j[S]));j=D,N=U,_=N.filter((k,S)=>c.includes(j[S]))}if(x?.image_paths&&Array.isArray(x.image_paths)&&p&&(g=[...x.image_paths]),i&&i.length>0){const{paths:D,urls:U}=await K(i,n);m=D,y=U}let L,I;y.length>0||c.length>0?(L=[...j,...y],I=[...N,...m]):j.length>0?(L=j,I=N):(L=null,I=null);const A={...o,image_urls:L,image_paths:I},{data:V,error:M}=await v.from("cars").update(A).eq("id",n).select().single();if(M)throw m.length>0&&await T(m),M;return p&&g.length>0&&await T(g),_.length>0&&await T(_),V}catch(x){throw m.length>0&&await T(m),x}}async function Re(n){const{data:o,error:i}=await v.from("cars").select("image_paths").eq("id",n).single();if(i&&i.code!=="PGRST116")throw i;o?.image_paths&&Array.isArray(o.image_paths)&&o.image_paths.length>0&&await T(o.image_paths);const{error:p}=await v.from("cars").delete().eq("id",n);if(p)throw p;return{success:!0}}const Ge=Object.freeze(Object.defineProperty({__proto__:null,createCarWithImages:ne,deleteCarWithImages:Re,removeImagesFromStorageByPaths:T,updateCarWithImages:oe,uploadImageFile:le,uploadMultipleImageFiles:K},Symbol.toStringTag,{value:"Module"})),rs=()=>{const n=u.useRef(null),[o,i]=u.useState([]),[p,c]=u.useState([]),[m,y]=u.useState(!0),[g,_]=u.useState(null),[x,F]=u.useState(!1),[j,N]=u.useState(!1),[L,I]=u.useState(!1),[A,V]=u.useState(null),[M,D]=u.useState([]),[U,k]=u.useState([]),[S,Y]=u.useState([]),[E,ce]=u.useState(""),[R,de]=u.useState("all"),[G,me]=u.useState("all"),[$,ue]=u.useState("all"),[r,f]=u.useState({title:"",make:"",model:"",year:new Date().getFullYear(),seats:5,fuel_type:"petrol",transmission:"automatic",price_per_day:0,price_per_hour:0,service_charge:0,description:"",location_city:"",status:"published"});u.useEffect(()=>{Q()},[]),u.useEffect(()=>{let s=o;E&&(s=s.filter(t=>t.title.toLowerCase().includes(E.toLowerCase())||t.make.toLowerCase().includes(E.toLowerCase())||t.model.toLowerCase().includes(E.toLowerCase())||t.location_city?.toLowerCase().includes(E.toLowerCase()))),R!=="all"&&(s=s.filter(t=>t.status===R)),G!=="all"&&(s=s.filter(t=>t.fuel_type===G)),$!=="all"&&(s=s.filter(t=>t.transmission===$)),c(s)},[o,E,R,G,$]),Fe("cars",s=>{i(t=>[...t,s.new])},s=>{i(t=>t.map(l=>l.id===s.new.id?s.new:l))},s=>{i(t=>t.filter(l=>l.id!==s.old.id))});const Q=async()=>{try{const{data:s,error:t}=await v.from("cars").select("*").order("created_at",{ascending:!1});if(t)throw t;console.info("Admin: Fetched cars from DB",{count:s?.length,sampleCar:s?.[0]?{id:s[0].id,title:s[0].title,image_urls:s[0].image_urls,envUrl:"https://rcpkhtlvfvafympulywx.supabase.co"}:null}),s?.forEach(a=>{console.log("Admin Car Data:",{id:a.id,title:a.title,image_urls:a.image_urls,image_paths:a.image_paths,image_urls_type:typeof a.image_urls,image_paths_type:typeof a.image_paths,image_urls_length:Array.isArray(a.image_urls)?a.image_urls.length:"Not an array",image_paths_length:Array.isArray(a.image_paths)?a.image_paths.length:"Not an array"})});const l=(s||[]).map(a=>Le(a));l.forEach(a=>{console.log("Mapped Car Images:",{id:a.id,title:a.title,images:a.images,thumbnail:a.thumbnail,images_type:typeof a.images,images_length:Array.isArray(a.images)?a.images.length:"Not an array"})}),i(l),c(l)}catch(s){console.error("Error fetching cars:",s),P({title:"Error",description:"Failed to load cars",variant:"destructive"})}finally{y(!1)}},he=async s=>{N(!0);try{const t=Array.isArray(s)?s:Array.from(s);for(let a=0;a<t.length;a++){const w=t[a];if(!w.type.startsWith("image/"))throw new Error(`File ${w.name} is not a valid image. Please upload only image files (JPEG, PNG, GIF, etc.).`)}const l=t.map(a=>URL.createObjectURL(a));D(a=>[...a,...t]),k(a=>[...a,...l])}catch(t){console.error("Error uploading images:",t),P({title:"Upload Error",description:t.message||"Failed to upload images",variant:"destructive"})}finally{N(!1)}},pe=()=>{f({title:"",make:"",model:"",year:new Date().getFullYear(),seats:5,fuel_type:"petrol",transmission:"automatic",price_per_day:0,price_per_hour:0,service_charge:0,description:"",location_city:"",status:"published"}),_(null),D([]),k([]),Y([]),U.forEach(s=>URL.revokeObjectURL(s))},ge=s=>{_(s),f({title:s.title,make:s.make||"",model:s.model||"",year:s.year||new Date().getFullYear(),seats:s.seats||5,fuel_type:s.fuel_type||"petrol",transmission:s.transmission||"automatic",price_per_day:s.price_per_day||0,price_per_hour:s.price_per_hour||0,service_charge:s.service_charge||0,description:s.description||"",location_city:s.location_city||"",status:s.status||"published"}),D([]),k([]),Y([]),F(!0)},fe=async()=>{if(A)try{const s="https://rcpkhtlvfvafympulywx.supabase.co";let t=!1;if(s)try{const l=`${s.replace(".co","-functions.supabase.co")}/delete-car`,{data:a}=await v.auth.getSession(),w=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a?.session?.access_token||""}`},body:JSON.stringify({carId:A.id})});if(w.ok){const H=await w.json();console.log("Server-side deletion result:",H),t=!0,P({title:"Success",description:"Car deleted successfully from database and storage"})}else{const H=await w.text();console.warn("Server-side deletion failed:",w.status,H),P({title:"Warning",description:"Server deletion failed, trying client-side deletion...",variant:"default"})}}catch(l){console.warn("Server-side deletion error:",l)}if(!t)try{const{deleteCarWithImages:l}=await Ne(async()=>{const{deleteCarWithImages:a}=await Promise.resolve().then(()=>Ge);return{deleteCarWithImages:a}},void 0);await l(A.id),P({title:"Success",description:"Car deleted successfully using client-side method"})}catch(l){throw console.error("Client-side deletion failed:",l),new Error(`Failed to delete car using both methods: ${l.message||"Unknown error"}`)}i(l=>l.filter(a=>a.id!==A.id)),c(l=>l.filter(a=>a.id!==A.id)),I(!1),V(null)}catch(s){console.error("Error deleting car:",s),P({title:"Error",description:`Failed to delete car: ${s.message||"Unknown error"}`,variant:"destructive"})}},xe=async s=>{s.preventDefault();try{const t=g?r.status:"published",l=re(r.price_per_day),a={title:r.title,make:r.make,model:r.model,year:r.year,seats:r.seats,fuel_type:r.fuel_type,transmission:r.transmission,price_per_day:r.price_per_day,price_per_hour:r.price_per_hour||0,service_charge:r.service_charge||0,description:r.description||"",location_city:r.location_city||"",status:t,price_in_paise:l,currency:"INR"};if(N(!0),g){const w=await oe(g.id,a,M,!1,S);console.log("Car updated successfully:",w)}else{const w=await ne(a,M);console.log("Car created successfully:",w)}F(!1),pe(),Q(),P({title:"Success",description:g?"Car updated successfully":"Car created successfully"})}catch(t){console.error("Error saving car:",t),P({title:"Error",description:`Failed to save car: ${t.message||"Unknown error"}`,variant:"destructive"})}finally{N(!1)}},je=s=>{const t=[...M],l=[...U];URL.revokeObjectURL(l[s]),t.splice(s,1),l.splice(s,1),D(t),k(l)},ve=s=>{Y(t=>t.includes(s)?t.filter(l=>l!==s):[...t,s])},ye=s=>{switch(s){case"published":return e.jsx(q,{variant:"default",children:"Published"});case"draft":return e.jsx(q,{variant:"secondary",children:"Draft"});case"maintenance":return e.jsx(q,{variant:"outline",children:"Maintenance"});default:return e.jsx(q,{variant:"default",children:s})}};return m?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-primary border-t-transparent animate-spin"})}):e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Car Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your car inventory"})]}),e.jsxs(C,{onClick:()=>F(!0),children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Add Car"]})]}),e.jsxs(X,{className:"mb-8",children:[e.jsx(we,{children:e.jsxs(Ce,{className:"flex items-center",children:[e.jsx(Te,{className:"w-5 h-5 mr-2"}),"Filters"]})}),e.jsx(Z,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"search",children:"Search"}),e.jsx(b,{id:"search",placeholder:"Search by title, make, model...",value:E,onChange:s=>ce(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"status",children:"Status"}),e.jsxs(O,{value:R,onValueChange:de,children:[e.jsx(W,{children:e.jsx(B,{placeholder:"Select status"})}),e.jsxs(z,{children:[e.jsx(d,{value:"all",children:"All Statuses"}),e.jsx(d,{value:"published",children:"Published"}),e.jsx(d,{value:"draft",children:"Draft"}),e.jsx(d,{value:"maintenance",children:"Maintenance"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"fuel",children:"Fuel Type"}),e.jsxs(O,{value:G,onValueChange:me,children:[e.jsx(W,{children:e.jsx(B,{placeholder:"Select fuel type"})}),e.jsxs(z,{children:[e.jsx(d,{value:"all",children:"All Fuel Types"}),e.jsx(d,{value:"petrol",children:"Petrol"}),e.jsx(d,{value:"diesel",children:"Diesel"}),e.jsx(d,{value:"electric",children:"Electric"}),e.jsx(d,{value:"cng",children:"CNG"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"transmission",children:"Transmission"}),e.jsxs(O,{value:$,onValueChange:ue,children:[e.jsx(W,{children:e.jsx(B,{placeholder:"Select transmission"})}),e.jsxs(z,{children:[e.jsx(d,{value:"all",children:"All Transmissions"}),e.jsx(d,{value:"manual",children:"Manual"}),e.jsx(d,{value:"automatic",children:"Automatic"})]})]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:p.map(s=>e.jsx(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs(X,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ae,{images:s.image_urls&&s.image_urls.length>0?s.image_urls:void 0,className:"h-48"}),e.jsx("div",{className:"absolute top-2 right-2",children:ye(s.status)})]}),e.jsxs(Z,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:s.title}),e.jsxs("p",{className:"text-muted-foreground text-sm mb-2",children:[s.make," ",s.model," (",s.year,")"]}),e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"font-bold text-primary",children:Ie(s.price_in_paise||re(s.price_per_day))}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[s.seats," seats"]}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:s.fuel_type})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>ge(s),children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>{V(s),I(!0)},children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})},s.id))}),p.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ke,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No cars found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:E||R!=="all"||G!=="all"||$!=="all"?"Try adjusting your filters":"Get started by adding a new car"}),!E&&R==="all"&&G==="all"&&$==="all"&&e.jsxs(C,{onClick:()=>F(!0),children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Add Your First Car"]})]}),e.jsx(ee,{open:x,onOpenChange:F,children:e.jsxs(se,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(te,{children:e.jsx(ae,{children:g?"Edit Car":"Add New Car"})}),e.jsxs("form",{onSubmit:xe,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"title",children:"Title *"}),e.jsx(b,{id:"title",value:r.title,onChange:s=>f({...r,title:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"make",children:"Make"}),e.jsx(b,{id:"make",value:r.make,onChange:s=>f({...r,make:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"model",children:"Model"}),e.jsx(b,{id:"model",value:r.model,onChange:s=>f({...r,model:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"year",children:"Year"}),e.jsx(b,{id:"year",type:"number",value:r.year,onChange:s=>f({...r,year:parseInt(s.target.value)||new Date().getFullYear()})})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"seats",children:"Seats"}),e.jsx(b,{id:"seats",type:"number",value:r.seats,onChange:s=>f({...r,seats:parseInt(s.target.value)||5})})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"fuel_type",children:"Fuel Type"}),e.jsxs(O,{value:r.fuel_type,onValueChange:s=>f({...r,fuel_type:s}),children:[e.jsx(W,{children:e.jsx(B,{})}),e.jsxs(z,{children:[e.jsx(d,{value:"petrol",children:"Petrol"}),e.jsx(d,{value:"diesel",children:"Diesel"}),e.jsx(d,{value:"electric",children:"Electric"}),e.jsx(d,{value:"cng",children:"CNG"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"transmission",children:"Transmission"}),e.jsxs(O,{value:r.transmission,onValueChange:s=>f({...r,transmission:s}),children:[e.jsx(W,{children:e.jsx(B,{})}),e.jsxs(z,{children:[e.jsx(d,{value:"manual",children:"Manual"}),e.jsx(d,{value:"automatic",children:"Automatic"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"status",children:"Status"}),e.jsxs(O,{value:r.status,onValueChange:s=>f({...r,status:s}),children:[e.jsx(W,{children:e.jsx(B,{})}),e.jsxs(z,{children:[e.jsx(d,{value:"published",children:"Published"}),e.jsx(d,{value:"draft",children:"Draft"}),e.jsx(d,{value:"maintenance",children:"Maintenance"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"price_per_day",children:"Price per Day (₹)"}),e.jsx(b,{id:"price_per_day",type:"number",value:r.price_per_day,onChange:s=>f({...r,price_per_day:parseFloat(s.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"price_per_hour",children:"Price per Hour (₹)"}),e.jsx(b,{id:"price_per_hour",type:"number",value:r.price_per_hour||"",onChange:s=>f({...r,price_per_hour:parseFloat(s.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"service_charge",children:"Service Charge (₹)"}),e.jsx(b,{id:"service_charge",type:"number",value:r.service_charge||"",onChange:s=>f({...r,service_charge:parseFloat(s.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"location_city",children:"Location"}),e.jsx(b,{id:"location_city",value:r.location_city||"",onChange:s=>f({...r,location_city:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"description",children:"Description"}),e.jsx(Se,{id:"description",value:r.description||"",onChange:s=>f({...r,description:s.target.value}),rows:3})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Images"}),e.jsxs("div",{className:"mt-2",children:[g&&g.image_urls&&g.image_urls.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Current Images:"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:g.image_urls.map((s,t)=>e.jsxs("div",{className:"relative group",children:[e.jsx(Ee,{src:s,alt:`Current car image ${t+1}`,className:"w-full h-24 object-cover rounded"}),e.jsx(C,{type:"button",variant:S.includes(s)?"default":"destructive",size:"sm",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>ve(s),children:S.includes(s)?e.jsx("span",{className:"text-xs",children:"Undo"}):e.jsx(J,{className:"w-3 h-3"})}),S.includes(s)&&e.jsx("div",{className:"absolute inset-0 bg-red-500/50 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"REMOVE"})})]},t))}),S.length>0&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[S.length," image(s) marked for removal"]})]}),e.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6 text-center",children:[e.jsx(Pe,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-2",children:j?"Uploading...":"Drag and drop images here, or click to select files"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"PNG, JPG, GIF up to 10MB"}),e.jsx(b,{type:"file",multiple:!0,accept:"image/*",onChange:s=>{const t=s.target.files;t&&t.length>0&&he(t)},disabled:j,className:"hidden",id:"image-upload",ref:n}),e.jsx(h,{htmlFor:"image-upload",children:e.jsx(C,{asChild:!0,variant:"outline",disabled:j,children:e.jsx("span",{children:"Select Images"})})})]}),U.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"New Images:"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:U.map((s,t)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s,alt:`Uploaded car image ${t+1}`,className:"w-full h-24 object-cover rounded"}),e.jsx(C,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>je(t),children:e.jsx(J,{className:"w-3 h-3"})})]},t))})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(C,{type:"button",variant:"outline",onClick:()=>F(!1),children:"Cancel"}),e.jsx(C,{type:"submit",disabled:j,children:j?"Saving...":g?"Update Car":"Add Car"})]})]})]})}),e.jsx(ee,{open:L,onOpenChange:I,children:e.jsxs(se,{children:[e.jsx(te,{children:e.jsx(ae,{children:"Confirm Deletion"})}),e.jsxs("div",{className:"py-4",children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("span",{className:"font-semibold",children:A?.title}),"?"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"This action cannot be undone."})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(C,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),e.jsx(C,{variant:"destructive",onClick:fe,children:"Delete"})]})]})})]})};export{rs as default};
//# sourceMappingURL=AdminCarManagement-BjtKpKsO.js.map
